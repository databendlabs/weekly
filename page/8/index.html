<!DOCTYPE html>
<html lang="en">

<head>
    <title>Databend Weekly</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://weekly.databend.rs/style.css">
    <link rel="stylesheet" href="https://weekly.databend.rs/color/blue.css">

    <link rel="stylesheet" href="https://weekly.databend.rs/font-hack.css">

    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://weekly.databend.rs" style="text-decoration: none;">
                    <div class="logo">
                            Databend Weekly
                        </div>
                </a>
            </div>
        </div>

        <nav class="menu">
            <ul class="menu__inner">
                
                <li class="active"><a href="https://weekly.databend.rs">weekly</a></li>
            
                <li><a href="https://weekly.databend.rs/archive">archive</a></li>
            
                <li><a href="https://github.com/datafuselabs/databend" target="_blank" rel="noopener noreferrer">github</a></li>
            
                <li><a href="https://databend.rs/" target="_blank" rel="noopener noreferrer">docs</a></li>
            
                <li><a href="https://weekly.databend.rs/rss.xml">rss</a></li>
            </ul>
        </nav>
    
    </header>
    

    <div class="content">
        
        <div class="posts">
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-06-22-databend-weekly/">This week in Databend #47</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-06-22
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is an open source <strong>elastic</strong> and <strong>reliable</strong> Modern Cloud Data Warehouse, it offers blazing fast query and combines elasticity, simplicity, low cost of the cloud, built to make the Data Cloud easy.</p>
<h2 id="big-changes">Big changes</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="features">Features</h3>
<ul>
<li>transient fuse table (<a href="https://github.com/datafuselabs/databend/pull/5968">#5968</a>)</li>
<li>support field comment (<a href="https://github.com/datafuselabs/databend/pull/5952">#5952</a>)</li>
<li>stop parsing at insert statement (<a href="https://github.com/datafuselabs/databend/pull/6048">#6048</a>)</li>
<li>configurable repr of float denormals in output formats (<a href="https://github.com/datafuselabs/databend/pull/6065">#6065</a>)</li>
<li>integrate cluster select query with new processor (<a href="https://github.com/datafuselabs/databend/pull/4544">#4544</a>)</li>
</ul>
<p><strong>optimizer</strong></p>
<ul>
<li>decorrelate <code>EXISTS</code> subquery (<a href="https://github.com/datafuselabs/databend/pull/6073">#6073</a>)</li>
<li>support push down filter through cross apply (<a href="https://github.com/datafuselabs/databend/pull/6079">#6079</a>)</li>
</ul>
<p><strong>functions</strong></p>
<ul>
<li>support <code>ifnull</code> (<a href="https://github.com/datafuselabs/databend/pull/5921">#5921</a>)</li>
<li>support <code>multi_if</code> (<a href="https://github.com/datafuselabs/databend/pull/6039">#6039</a>)</li>
<li>support <code>date_sub</code> (<a href="https://github.com/datafuselabs/databend/pull/6050">#6050</a>)</li>
<li>support <code>to_nullable</code> and <code>assume_not_null</code> (<a href="https://github.com/datafuselabs/databend/pull/6055">#6055</a>)</li>
<li>support <code>coalesce</code> (<a href="https://github.com/datafuselabs/databend/pull/5922">#5922</a>)</li>
</ul>
<p><strong>clickhouse handle</strong></p>
<ul>
<li>support settings (<a href="https://github.com/datafuselabs/databend/pull/5945">#5945</a>)</li>
<li>improve output format (<a href="https://github.com/datafuselabs/databend/pull/6027">#6027</a>)</li>
<li>support set database. (<a href="https://github.com/datafuselabs/databend/pull/6097">#6097</a>)</li>
</ul>
<p><strong>new planner</strong></p>
<ul>
<li>show statements (<a href="https://github.com/datafuselabs/databend/pull/6013">#6013</a>)</li>
<li>show users/roles statement (<a href="https://github.com/datafuselabs/databend/pull/6016">#6016</a>)</li>
<li>migrate grant (<a href="https://github.com/datafuselabs/databend/pull/6049">#6049</a>)</li>
<li>migrate revoke (<a href="https://github.com/datafuselabs/databend/pull/6066">#6066</a>)</li>
<li>migrate copy (<a href="https://github.com/datafuselabs/databend/pull/6074">#6074</a>)</li>
<li>migrate insert statement (<a href="https://github.com/datafuselabs/databend/pull/5897">#5897</a>)</li>
<li>support query log for new planner (<a href="https://github.com/datafuselabs/databend/pull/6053">#6053</a>)</li>
<li>support <code>SELECT ... FROM ... { AT TIMESTAMP }</code> (<a href="https://github.com/datafuselabs/databend/pull/6056">#6056</a>)</li>
</ul>
<h3 id="improvement">Improvement</h3>
<ul>
<li>stop supporting multiple statements (<a href="https://github.com/datafuselabs/databend/pull/6052">#6052</a>)</li>
<li>make uuid return uuid values for each row (<a href="https://github.com/datafuselabs/databend/pull/6114">#6114</a>)</li>
<li>add more meta cluster status (<a href="https://github.com/datafuselabs/databend/pull/6083">#6083</a>)</li>
<li>cache panic of http handlers (<a href="https://github.com/datafuselabs/databend/pull/6090">#6090</a>)</li>
<li>adjust table snapshot timestamp precision to micro second (<a href="https://github.com/datafuselabs/databend/pull/6144">#6144</a>)</li>
</ul>
<h3 id="bug-fixes">Bug fixes</h3>
<ul>
<li>fix <code>de_csv</code> with escaped quoted (<a href="https://github.com/datafuselabs/databend/pull/6008">#6008</a>)</li>
<li>consider <code>NULL</code> for binary op in type checker (<a href="https://github.com/datafuselabs/databend/pull/6043">#6043</a>)</li>
<li>fix error of <code>EXISTS</code> subquery (<a href="https://github.com/datafuselabs/databend/pull/6073">#6073</a>)</li>
<li>transient object storage IO operation fault handling (<a href="https://github.com/datafuselabs/databend/pull/6045">#6045</a>)</li>
<li>remove a wrong cut parser in subquery (<a href="https://github.com/datafuselabs/databend/pull/6111">#6111</a>)</li>
</ul>
<h2 id="tips">Tips</h2>
<p>Let's learn a weekly tip from Databend.</p>
<h3 id="cluster-key">Cluster key</h3>
<p>Cluster key is intended to improve query performance by physically clustering data together. </p>
<p>For example, when you set a column as your cluster key for a table, the table data will be physically sorted by the column you set. This will maximize the query performance if your most queries are filtered by the column.</p>
<p><strong>Sets a cluster key when creating a table</strong></p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>CREATE TABLE &lt;name&gt; ... CLUSTER BY ( &lt;expr1&gt; [ , &lt;expr2&gt; ... ] )
</span></code></pre>
<p><strong>Changes the cluster key for a table</strong></p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>ALTER TABLE &lt;name&gt; CLUSTER BY ( &lt;expr1&gt; [ , &lt;expr2&gt; ... ] )
</span></code></pre>
<p><strong>Deletes the cluster key for a table</strong></p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>ALTER TABLE &lt;name&gt; DROP CLUSTER KEY
</span></code></pre>
<p><strong>Learn more:</strong></p>
<ul>
<li><a href="https://databend.rs/doc/reference/sql/ddl/clusterkey/dml-set-cluster-key">DOC | SET CLUSTER KEY</a></li>
<li><a href="https://databend.rs/doc/reference/sql/ddl/clusterkey/dml-alter-cluster-key">DOC | ALTER CLUSTER KEY</a></li>
<li><a href="https://databend.rs/doc/reference/sql/ddl/clusterkey/dml-drop-cluster-key">DOC | DROP CLUSTER KEY</a></li>
</ul>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.97-nightly">v0.7.97-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.96-nightly">v0.7.96-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.95-nightly">v0.7.95-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.94-nightly">v0.7.94-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.93-nightly">v0.7.93-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.92-nightly">v0.7.92-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.91-nightly">v0.7.91-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.90-nightly">v0.7.90-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.89-nightly">v0.7.89-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.88-nightly">v0.7.88-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/AngleNet"><img alt="AngleNet" src="https://avatars.githubusercontent.com/u/14330209?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/cadl"><img alt="cadl" src="https://avatars.githubusercontent.com/u/1629582?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/AngleNet">AngleNet</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/cadl">cadl</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/drmingdrmer"><img alt="drmingdrmer" src="https://avatars.githubusercontent.com/u/44069?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/fkuner"><img alt="fkuner" src="https://avatars.githubusercontent.com/u/39162698?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/hantmac"><img alt="hantmac" src="https://avatars.githubusercontent.com/u/7600925?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/junnplus"><img alt="junnplus" src="https://avatars.githubusercontent.com/u/8097526?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/leiysky"><img alt="leiysky" src="https://avatars.githubusercontent.com/u/22445410?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/drmingdrmer">drmingdrmer</a></td><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td><td align="center"><a href="https://github.com/fkuner">fkuner</a></td><td align="center"><a href="https://github.com/hantmac">hantmac</a></td><td align="center"><a href="https://github.com/junnplus">junnplus</a></td><td align="center"><a href="https://github.com/leiysky">leiysky</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/PsiACE"><img alt="PsiACE" src="https://avatars.githubusercontent.com/u/36896360?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/RinChanNOWWW"><img alt="RinChanNOWWW" src="https://avatars.githubusercontent.com/u/33975039?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/PsiACE">PsiACE</a></td><td align="center"><a href="https://github.com/RinChanNOWWW">RinChanNOWWW</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TennyZhuang"><img alt="TennyZhuang" src="https://avatars.githubusercontent.com/u/9161438?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TianLangStudio"><img alt="TianLangStudio" src="https://avatars.githubusercontent.com/u/20293523?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Veeupup"><img alt="Veeupup" src="https://avatars.githubusercontent.com/u/26339429?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/wfxr"><img alt="wfxr" src="https://avatars.githubusercontent.com/u/6105425?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/wubx"><img alt="wubx" src="https://avatars.githubusercontent.com/u/320680?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/TennyZhuang">TennyZhuang</a></td><td align="center"><a href="https://github.com/TianLangStudio">TianLangStudio</a></td><td align="center"><a href="https://github.com/Veeupup">Veeupup</a></td><td align="center"><a href="https://github.com/wfxr">wfxr</a></td><td align="center"><a href="https://github.com/wubx">wubx</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/yuuch"><img alt="yuuch" src="https://avatars.githubusercontent.com/u/14847010?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhang2014"><img alt="zhang2014" src="https://avatars.githubusercontent.com/u/8087042?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/yuuch">yuuch</a></td><td align="center"><a href="https://github.com/zhang2014">zhang2014</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a></li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a></li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a></li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-06-15-databend-weekly/">This week in Databend #46</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-06-15
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is an open source <strong>elastic</strong> and <strong>reliable</strong> Modern Cloud Data Warehouse, it offers blazing fast query and combines elasticity, simplicity, low cost of the cloud, built to make the Data Cloud easy.</p>
<h2 id="big-changes">Big changes</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="features">Features</h3>
<ul>
<li><code>WINDOW</code> function (<a href="https://github.com/datafuselabs/databend/pull/5401">#5401</a>)</li>
<li>new table engine: <code>RANDOM</code> (<a href="https://github.com/datafuselabs/databend/pull/5896">#5896</a>)</li>
<li>clickhouse http handler support TsvWithNamesAndTypes (<a href="https://github.com/datafuselabs/databend/pull/5898">#5898</a>)</li>
<li>add benchmark scripts of metasrv (<a href="https://github.com/datafuselabs/databend/pull/5865">#5865</a>)</li>
<li>support remove stage files (<a href="https://github.com/datafuselabs/databend/pull/5788">#5788</a>)</li>
<li>support struct data type (<a href="https://github.com/datafuselabs/databend/pull/5940">#5940</a>)</li>
</ul>
<p><strong>optimizer</strong></p>
<ul>
<li>support some common optimizer rules to refine optimizer framework (<a href="https://github.com/datafuselabs/databend/pull/5877">#5877</a>)</li>
<li>support predicate push down through join (<a href="https://github.com/datafuselabs/databend/pull/5914">#5914</a>)</li>
<li>support constant folding (<a href="https://github.com/datafuselabs/databend/pull/5924">#5924</a>)</li>
</ul>
<p><strong>new planner</strong></p>
<ul>
<li>support left outer join and right outer join (<a href="https://github.com/datafuselabs/databend/pull/5972">#5972</a>)</li>
<li>support semi and anti join in new planner (<a href="https://github.com/datafuselabs/databend/pull/5869">#5869</a>)</li>
<li>support set operators in parser and planner (<a href="https://github.com/datafuselabs/databend/pull/5833">#5833</a>)</li>
<li>support table statements in new planner (<a href="https://github.com/datafuselabs/databend/pull/5907">#5907</a>)</li>
<li>add <code>DDL STAGE</code> for new planner framework (<a href="https://github.com/datafuselabs/databend/pull/5821">#5821</a>)</li>
<li>support rename database in new planner (<a href="https://github.com/datafuselabs/databend/pull/5887">#5887</a>)</li>
<li>support <code>alter/drop view</code> in new planner (<a href="https://github.com/datafuselabs/databend/pull/5862">#5862</a> &amp; <a href="https://github.com/datafuselabs/databend/pull/5920">#5920</a>)</li>
<li>migrate CREATE/DROP ROLE statement to new planner (<a href="https://github.com/datafuselabs/databend/pull/5935">#5935</a>)</li>
</ul>
<h3 id="improvement">Improvement</h3>
<ul>
<li>row base serializer  (<a href="https://github.com/datafuselabs/databend/pull/5791">#5791</a>)</li>
<li>renaming for better readability (<a href="https://github.com/datafuselabs/databend/pull/5879">#5879</a>)</li>
<li>list/remove stage files from meta api (<a href="https://github.com/datafuselabs/databend/pull/5857">#5857</a>)</li>
<li>use unboxed_simple to simple GAT in async-trait (<a href="https://github.com/datafuselabs/databend/pull/5999">#5999</a>)</li>
<li>add meta grpc client network metrics (<a href="https://github.com/datafuselabs/databend/pull/5978">#5978</a>)</li>
<li>improve clickhouse http handler (<a href="https://github.com/datafuselabs/databend/pull/5933">#5933</a>)</li>
<li>use micromarshal to make references clearer (<a href="https://github.com/datafuselabs/databend/pull/5974">#5974</a>)</li>
</ul>
<h3 id="build-testing-ci">Build / Testing / CI</h3>
<ul>
<li>use fuse engine instead of memory engine in test (<a href="https://github.com/datafuselabs/databend/pull/5530">#5530</a>)</li>
</ul>
<h3 id="bug-fixes">Bug fixes</h3>
<ul>
<li>fix read quoted string (<a href="https://github.com/datafuselabs/databend/pull/5870">#5870</a>)</li>
<li>corretly handle catalog in statements (<a href="https://github.com/datafuselabs/databend/pull/5909">#5909</a>)</li>
<li>fix correlated subquery with joins (<a href="https://github.com/datafuselabs/databend/pull/5947">#5947</a>)</li>
<li>server panic when exceeds max active sessions (<a href="https://github.com/datafuselabs/databend/pull/5928">#5928</a>)</li>
<li>fix status cause mysql client hang (<a href="https://github.com/datafuselabs/databend/pull/5961">#5961</a>)</li>
<li><code>ProcessorExecutorStream</code> lost data (<a href="https://github.com/datafuselabs/databend/pull/5983">#5983</a>)</li>
<li>fix incorrect return datatype of function if (<a href="https://github.com/datafuselabs/databend/pull/5980">#5980</a>)</li>
</ul>
<h2 id="tips">Tips</h2>
<p>Let's learn a weekly tip from Databend.</p>
<h3 id="using-join-with-databend">Using Join with Databend</h3>
<p>As you can see, one of the major efforts of Databend in recent times has been the development and migration to the new Planner. We have implemented support for Join on the new Planner to better accommodate multi-table queries.</p>
<blockquote>
<p>To use JOIN, you must enable the new Databend planner first. To do so, perform the following command in the SQL client:</p>
<pre data-lang="SQL" style="background-color:#151515;color:#e8e8d3;" class="language-SQL "><code class="language-SQL" data-lang="SQL"><span>set enable_planner_v2=</span><span style="color:#cf6a4c;">1</span><span>;
</span></code></pre>
</blockquote>
<p>A join allows you to combine columns from two or more tables into a single result set. Databend supports the following join types:</p>
<ul>
<li>Inner Join</li>
<li>Natural Join</li>
<li>Cross Join</li>
<li>Left Join</li>
<li>Right Join</li>
</ul>
<p><strong>Let's see a <code>CROSS JOIN</code> example</strong></p>
<p>A <em>cross join</em> returns a result set that includes each row from the first table joined with each row from the second table.</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>SELECT select_list
</span><span>FROM table_a
</span><span>	CROSS JOIN table_b
</span></code></pre>
<p>Imagine we have the following tables:</p>
<p>Table &quot;vip_info&quot;: This table stores the VIP client information.</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>| Client_ID | Region    |
</span><span>| --------- | --------- |
</span><span>| 101       | Toronto   |
</span><span>| 102       | Quebec    |
</span><span>| 103       | Vancouver |
</span></code></pre>
<p>Table &quot;gift&quot;: This table lists the gift options for the VIP clients.</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>| Gift      |
</span><span>| --------- |
</span><span>| Croissant |
</span><span>| Donut     |
</span><span>| Coffee    |
</span><span>| Soda      |
</span></code></pre>
<p>The following command returns a result set that assigns each gift option to each VIP client:</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>select </span><span style="color:#ffb964;">* </span><span>from vip_info cross join gift;
</span></code></pre>
<p>Output:</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>| Client_ID | Region    | Gift      |
</span><span>| --------- | --------- | --------- |
</span><span>| 101       | Toronto   | Croissant |
</span><span>| 101       | Toronto   | Donut     |
</span><span>| 101       | Toronto   | Coffee    |
</span><span>| 101       | Toronto   | Soda      |
</span><span>| 102       | Quebec    | Croissant |
</span><span>| 102       | Quebec    | Donut     |
</span><span>| 102       | Quebec    | Coffee    |
</span><span>| 102       | Quebec    | Soda      |
</span><span>| 103       | Vancouver | Croissant |
</span><span>| 103       | Vancouver | Donut     |
</span><span>| 103       | Vancouver | Coffee    |
</span><span>| 103       | Vancouver | Soda      |
</span></code></pre>
<p><strong>Learn more:</strong></p>
<ul>
<li><a href="https://databend.rs/doc/reference/sql/query-syntax/dml-join">DOC | JOIN</a></li>
</ul>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.87-nightly">v0.7.87-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.86-nightly">v0.7.86-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.85-nightly">v0.7.85-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.84-nightly">v0.7.84-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.83-nightly">v0.7.83-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.82-nightly">v0.7.82-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.81-nightly">v0.7.81-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.80-nightly">v0.7.80-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.79-nightly">v0.7.79-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.78-nightly">v0.7.78-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/doki23"><img alt="doki23" src="https://avatars.githubusercontent.com/u/11144133?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td><td align="center"><a href="https://github.com/doki23">doki23</a></td><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/fkuner"><img alt="fkuner" src="https://avatars.githubusercontent.com/u/39162698?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/hantmac"><img alt="hantmac" src="https://avatars.githubusercontent.com/u/7600925?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/junnplus"><img alt="junnplus" src="https://avatars.githubusercontent.com/u/8097526?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Kikkon"><img alt="Kikkon" src="https://avatars.githubusercontent.com/u/19528375?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/leiysky"><img alt="leiysky" src="https://avatars.githubusercontent.com/u/22445410?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/fkuner">fkuner</a></td><td align="center"><a href="https://github.com/hantmac">hantmac</a></td><td align="center"><a href="https://github.com/junnplus">junnplus</a></td><td align="center"><a href="https://github.com/Kikkon">Kikkon</a></td><td align="center"><a href="https://github.com/leiysky">leiysky</a></td><td align="center"><a href="https://github.com/lichuang">lichuang</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/PsiACE"><img alt="PsiACE" src="https://avatars.githubusercontent.com/u/36896360?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/RinChanNOWWW"><img alt="RinChanNOWWW" src="https://avatars.githubusercontent.com/u/33975039?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/PsiACE">PsiACE</a></td><td align="center"><a href="https://github.com/RinChanNOWWW">RinChanNOWWW</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td><td align="center"><a href="https://github.com/TCeason">TCeason</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ygf11"><img alt="ygf11" src="https://avatars.githubusercontent.com/u/3428089?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ZeaLoVe"><img alt="ZeaLoVe" src="https://avatars.githubusercontent.com/u/10904090?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/ygf11">ygf11</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/ZeaLoVe">ZeaLoVe</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a></li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a></li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a></li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-06-08-databend-weekly/">This week in Databend #45</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-06-08
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is an open source <strong>elastic</strong> and <strong>reliable</strong> Modern Cloud Data Warehouse, it offers blazing fast query and combines elasticity, simplicity, low cost of the cloud, built to make the Data Cloud easy.</p>
<h2 id="big-changes">Big changes</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="features">Features</h3>
<ul>
<li>undrop database (<a href="https://github.com/datafuselabs/databend/pull/5770">#5770</a>)</li>
<li>support async insert mode to imporve throughput (<a href="https://github.com/datafuselabs/databend/pull/5567">#5567</a>)</li>
<li>support alter table cluster key (<a href="https://github.com/datafuselabs/databend/pull/5718">#5718</a>)</li>
</ul>
<p><strong>meta</strong></p>
<ul>
<li>add gc out of drop retention time data schema API and unit tests (<a href="https://github.com/datafuselabs/databend/pull/5746">#5746</a>)</li>
<li>protobuf message has to persist <code>MIN_COMPATIBLE_VER</code> (<a href="https://github.com/datafuselabs/databend/pull/5785">#5785</a>)</li>
</ul>
<p><strong>functions</strong></p>
<ul>
<li>support function <code>timezone()</code> (<a href="https://github.com/datafuselabs/databend/pull/5840">#5840</a>)</li>
<li>add function <code>NULLIF</code> (<a href="https://github.com/datafuselabs/databend/pull/5772">#5772</a>)</li>
</ul>
<p><strong>new planner</strong></p>
<ul>
<li>introduce <code>InterpreterFactoryV2</code> for new planner (<a href="https://github.com/datafuselabs/databend/pull/5729">#5729</a>)</li>
<li>support udf (<a href="https://github.com/datafuselabs/databend/pull/5751">#5751</a>)</li>
<li><code>CREATE VIEW</code> (<a href="https://github.com/datafuselabs/databend/pull/5816">#5816</a>)</li>
<li><code>CREATE DATABASE</code> (<a href="https://github.com/datafuselabs/databend/pull/5804">#5804</a>) / <code>DROP DATABASE</code> (<a href="https://github.com/datafuselabs/databend/pull/5846">#5846</a>)</li>
<li><code>CREATE USER</code> (<a href="https://github.com/datafuselabs/databend/pull/5802">#5802</a>) / <code>ALTER USER</code> (<a href="https://github.com/datafuselabs/databend/pull/5823">#5823</a>) / <code>DROP USER</code> (<a href="https://github.com/datafuselabs/databend/pull/5813">#5813</a>)</li>
</ul>
<h3 id="improvement">Improvement</h3>
<ul>
<li>refactor location parse logic (<a href="https://github.com/datafuselabs/databend/pull/5790">#5790</a>)</li>
<li>show tenant quota for current tenant (<a href="https://github.com/datafuselabs/databend/pull/5750">#5750</a>)</li>
<li>support errorcode hint in new planner (<a href="https://github.com/datafuselabs/databend/pull/5756">#5756</a>)</li>
<li>don't load credential while reading stage (<a href="https://github.com/datafuselabs/databend/pull/5783">#5783</a>)</li>
<li>move Clickhouse HTTP handler to its own port (<a href="https://github.com/datafuselabs/databend/pull/5797">#5797</a>)</li>
</ul>
<p><strong>new parser</strong></p>
<ul>
<li>support cross join (<a href="https://github.com/datafuselabs/databend/pull/5730">#5730</a>)</li>
<li>flatten join lists (<a href="https://github.com/datafuselabs/databend/pull/5742">#5742</a>)</li>
</ul>
<h3 id="build-testing-ci">Build / Testing / CI</h3>
<ul>
<li>enable logic test (<a href="https://github.com/datafuselabs/databend/pull/5836">#5836</a>)</li>
</ul>
<h3 id="bug-fixes">Bug fixes</h3>
<ul>
<li>fix compressed buf not consumed correctly (<a href="https://github.com/datafuselabs/databend/pull/5727">#5727</a>)</li>
<li>support abort for pipeline executor stream (<a href="https://github.com/datafuselabs/databend/pull/5803">#5803</a>)</li>
<li>lz4raw compression of zero len buffer (<a href="https://github.com/datafuselabs/databend/pull/5806">#5806</a>)</li>
<li>fix server hang when sync work panic (<a href="https://github.com/datafuselabs/databend/pull/5814">#5814</a>)</li>
</ul>
<h2 id="tips">Tips</h2>
<p>Let's learn a weekly tip from Databend.</p>
<h3 id="databend-supports-async-insert-mode">Databend Supports Async Insert Mode</h3>
<p>When thousands of clients concurrently insert a small batch of data, each insert will be executed as follows:</p>
<p><code>Parser</code> -&gt; <code>Planner</code> -&gt; <code>Interpreter</code> -&gt; <code>Pipeline</code></p>
<p>It's inefficient because of I/O depth and cache locality.</p>
<p>To solve the problem, we want to buffer small inserts into batches in server which sacrifices tiny latency for better insert throughput, smaller block count and larger <code>DataBlock</code> in storage.</p>
<p>After doing this, inserts into the same table will be parsed and planned individual. The insert data will be convert to <code>DataBlock</code> and buffered. When some conditions are triggered, the buffered <code>DataBlock</code> will be interpreted once which also is beneficial for pipelines.</p>
<p><strong>Learn more:</strong></p>
<ul>
<li><a href="https://databend.rs/doc/contributing/rfcs/async-insert">RFC | Async Insert Mode</a></li>
<li><a href="https://github.com/datafuselabs/databend/pull/5567/">PR 5567 | Support async insert mode to imporve throughput</a></li>
</ul>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.77-nightly">v0.7.77-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.76-nightly">v0.7.76-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.75-nightly">v0.7.75-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.74-nightly">v0.7.74-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.73-nightly">v0.7.73-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.72-nightly">v0.7.72-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.71-nightly">v0.7.71-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.70-nightly">v0.7.70-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.69-nightly">v0.7.69-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/devillove084"><img alt="devillove084" src="https://avatars.githubusercontent.com/u/15782923?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/drmingdrmer"><img alt="drmingdrmer" src="https://avatars.githubusercontent.com/u/44069?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td><td align="center"><a href="https://github.com/devillove084">devillove084</a></td><td align="center"><a href="https://github.com/drmingdrmer">drmingdrmer</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/fkuner"><img alt="fkuner" src="https://avatars.githubusercontent.com/u/39162698?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/flaneur2020"><img alt="flaneur2020" src="https://avatars.githubusercontent.com/u/129800?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/hantmac"><img alt="hantmac" src="https://avatars.githubusercontent.com/u/7600925?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/junnplus"><img alt="junnplus" src="https://avatars.githubusercontent.com/u/8097526?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/leiysky"><img alt="leiysky" src="https://avatars.githubusercontent.com/u/22445410?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td><td align="center"><a href="https://github.com/fkuner">fkuner</a></td><td align="center"><a href="https://github.com/flaneur2020">flaneur2020</a></td><td align="center"><a href="https://github.com/hantmac">hantmac</a></td><td align="center"><a href="https://github.com/junnplus">junnplus</a></td><td align="center"><a href="https://github.com/leiysky">leiysky</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/LiuYuHui"><img alt="LiuYuHui" src="https://avatars.githubusercontent.com/u/13926137?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/RinChanNOWWW"><img alt="RinChanNOWWW" src="https://avatars.githubusercontent.com/u/33975039?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/LiuYuHui">LiuYuHui</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/RinChanNOWWW">RinChanNOWWW</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ygf11"><img alt="ygf11" src="https://avatars.githubusercontent.com/u/3428089?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ZeaLoVe"><img alt="ZeaLoVe" src="https://avatars.githubusercontent.com/u/10904090?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/ygf11">ygf11</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/ZeaLoVe">ZeaLoVe</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/zhang2014"><img alt="zhang2014" src="https://avatars.githubusercontent.com/u/8087042?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/zhang2014">zhang2014</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a></li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a></li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a></li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-06-01-databend-weekly/">This week in Databend #44</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-06-01
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is an open source <strong>elastic</strong> and <strong>reliable</strong> Modern Cloud Data Warehouse, it offers blazing fast query and combines elasticity, simplicity, low cost of the cloud, built to make the Data Cloud easy.</p>
<h2 id="big-changes">Big changes</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="features">Features</h3>
<ul>
<li>support correlated subquery (<a href="https://github.com/datafuselabs/databend/pull/5593">#5593</a>)</li>
<li>support <code>select ... at</code> (<a href="https://github.com/datafuselabs/databend/pull/5617">#5617</a> &amp; <a href="https://github.com/datafuselabs/databend/pull/5628">#5628</a>)</li>
<li>exchange protocol version with client (<a href="https://github.com/datafuselabs/databend/pull/5645">#5645</a>)</li>
<li>add decompress support for COPY INTO and streaming loading (<a href="https://github.com/datafuselabs/databend/pull/5655">#5655</a>)</li>
</ul>
<p><strong>new parser</strong></p>
<ul>
<li>implment string unescape (<a href="https://github.com/datafuselabs/databend/pull/5638">#5638</a>)</li>
<li>allow mysql-style hex number and single-item array (<a href="https://github.com/datafuselabs/databend/pull/5654">#5654</a>)</li>
</ul>
<p><strong>stage related</strong></p>
<ul>
<li>copy into stage support (<a href="https://github.com/datafuselabs/databend/pull/5579">#5579</a>)</li>
<li>add system.stages table and show stages (<a href="https://github.com/datafuselabs/databend/pull/5581">#5581</a>)</li>
</ul>
<p><strong>call functions</strong></p>
<ul>
<li>add call stats functions (<a href="https://github.com/datafuselabs/databend/pull/5646">#5646</a>)</li>
<li>add call function <code>system$search_tables</code> (<a href="https://github.com/datafuselabs/databend/pull/5663">#5643</a>)</li>
</ul>
<p><strong>new planner</strong></p>
<ul>
<li>support <code>explain</code> for new planner (<a href="https://github.com/datafuselabs/databend/pull/5587">#5587</a>)</li>
<li>support tuple in new planner (<a href="https://github.com/datafuselabs/databend/pull/5640">#5640</a>)</li>
<li>support cross join (<a href="https://github.com/datafuselabs/databend/pull/5715">#5715</a>)</li>
</ul>
<p><strong>Variant related</strong></p>
<ul>
<li>support variant group by (<a href="https://github.com/datafuselabs/databend/pull/5694">#5694</a>)</li>
<li>support variant order by (<a href="https://github.com/datafuselabs/databend/pull/5668">#5668</a>)</li>
</ul>
<h3 id="improvement">Improvement</h3>
<ul>
<li>refine table optimize (<a href="https://github.com/datafuselabs/databend/pull/5589">#5589</a>)</li>
<li>parse integer to u64 (<a href="https://github.com/datafuselabs/databend/pull/5692">#5692</a>)</li>
<li>support <code>FixedKey</code> u128, u256, u512 in group query (<a href="https://github.com/datafuselabs/databend/pull/5678">#5678</a>)</li>
<li>introduce <code>ScalarEvaluator</code> to evaluate <code>Scalar</code> (<a href="https://github.com/datafuselabs/databend/pull/5689">#5689</a>)</li>
<li>utilize with <code>HashMethodFixedKeys</code> in hash join (<a href="https://github.com/datafuselabs/databend/pull/5693">#5693</a>)</li>
<li>record count of tables for a tenant in KV space (<a href="https://github.com/datafuselabs/databend/pull/5708">#5708</a>)</li>
</ul>
<h3 id="build-testing-ci">Build / Testing / CI</h3>
<ul>
<li>add mock module, add test of out retention time data (<a href="https://github.com/datafuselabs/databend/pull/5707">#5707</a>)</li>
</ul>
<h3 id="bug-fixes">Bug fixes</h3>
<ul>
<li>retry while meeting error during load_credential (<a href="https://github.com/datafuselabs/databend/pull/5590">#5590</a>)</li>
<li>deny the root login from others host (<a href="https://github.com/datafuselabs/databend/pull/5588">#5588</a>)</li>
</ul>
<h2 id="tips">Tips</h2>
<p>Let's learn a weekly tip from Databend.</p>
<h3 id="copy-into-databend-with-compression-option"><code>COPY INTO</code> Databend with <code>COMPRESSION</code> Option</h3>
<p>After <a href="https://github.com/datafuselabs/databend/pull/5655">PR 5655</a>, Databend started to support decompression reads in <code>COPY INTO</code> and streaming leading.</p>
<p><strong>Loading Compressed Files from Amazon S3</strong></p>
<p>Try to load data from a gzip compressed csv and insert into <code>mytable</code>.</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>COPY INTO mytable
</span><span>  FROM s3://mybucket/</span><span style="color:#7697d6;">data</span><span>.</span><span style="color:#7697d6;">csv</span><span>.gz
</span><span>  credentials=(aws_key_id=</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">&lt;AWS_ACCESS_KEY_ID&gt;</span><span style="color:#556633;">&#39;</span><span> aws_secret_key=</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">&lt;AWS_SECRET_ACCESS_KEY&gt;</span><span style="color:#556633;">&#39;</span><span>)
</span><span>  FILE_FORMAT = (type = </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">CSV</span><span style="color:#556633;">&quot;</span><span> field_delimiter = </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">,</span><span style="color:#556633;">&#39;</span><span> record_delimiter = </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">\n</span><span style="color:#556633;">&#39; 
</span><span>  skip_header = </span><span style="color:#cf6a4c;">1</span><span> compression = GZIP) size_limit=</span><span style="color:#cf6a4c;">10</span><span>;
</span></code></pre>
<p><strong><code>COMPRESSION</code> Option</strong></p>
<p>The <code>COMPRESSION</code> option is a string that represents the compression algorithm.</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>| Values        | Notes                                                           |
</span><span>| ------------- | --------------------------------------------------------------- |
</span><span>| `AUTO`        | Auto detect compression via file extensions                     |
</span><span>| `GZIP`        |                                                                 |
</span><span>| `BZ2`         |                                                                 |
</span><span>| `BROTLI`      | Must be specified if loading/unloading Brotli-compressed files. |
</span><span>| `ZSTD`        | Zstandard v0.8 (and higher) is supported.                       |
</span><span>| `DEFLATE`     | Deflate-compressed files (with zlib header, RFC1950).           |
</span><span>| `RAW_DEFLATE` | Deflate-compressed files (without any header, RFC1951).         |
</span><span>| `NONE`        | Indicates that the files have not been compressed.              |
</span></code></pre>
<p><strong>Learn more:</strong></p>
<ul>
<li><a href="https://databend.rs/doc/reference/sql/dml/dml-copy-into-table">Doc | COPY INTO &lt;table&gt;</a></li>
<li><a href="https://github.com/datafuselabs/databend/pull/5655">PR 5655 | Add decompress support for COPY INTO and streaming loading</a></li>
</ul>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.68-nightly">v0.7.68-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.67-nightly">v0.7.67-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.66-nightly">v0.7.67-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.65-nightly">v0.7.65-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.64-nightly">v0.7.64-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.63-nightly">v0.7.63-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.62-nightly">v0.7.62-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.61-nightly">v0.7.61-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ariesdevil"><img alt="ariesdevil" src="https://avatars.githubusercontent.com/u/7812909?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Chasen-Zhang"><img alt="Chasen-Zhang" src="https://avatars.githubusercontent.com/u/15354455?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/ariesdevil">ariesdevil</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/Chasen-Zhang">Chasen-Zhang</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/devillove084"><img alt="devillove084" src="https://avatars.githubusercontent.com/u/15782923?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/drmingdrmer"><img alt="drmingdrmer" src="https://avatars.githubusercontent.com/u/44069?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/flaneur2020"><img alt="flaneur2020" src="https://avatars.githubusercontent.com/u/129800?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/hanyisong"><img alt="hanyisong" src="https://avatars.githubusercontent.com/u/71937758?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/junnplus"><img alt="junnplus" src="https://avatars.githubusercontent.com/u/8097526?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/devillove084">devillove084</a></td><td align="center"><a href="https://github.com/drmingdrmer">drmingdrmer</a></td><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td><td align="center"><a href="https://github.com/flaneur2020">flaneur2020</a></td><td align="center"><a href="https://github.com/hanyisong">hanyisong</a></td><td align="center"><a href="https://github.com/junnplus">junnplus</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/leiysky"><img alt="leiysky" src="https://avatars.githubusercontent.com/u/22445410?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/PsiACE"><img alt="PsiACE" src="https://avatars.githubusercontent.com/u/36896360?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/RinChanNOWWW"><img alt="RinChanNOWWW" src="https://avatars.githubusercontent.com/u/33975039?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ryanrussell"><img alt="ryanrussell" src="https://avatars.githubusercontent.com/u/523300?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/leiysky">leiysky</a></td><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/PsiACE">PsiACE</a></td><td align="center"><a href="https://github.com/RinChanNOWWW">RinChanNOWWW</a></td><td align="center"><a href="https://github.com/ryanrussell">ryanrussell</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/ZeaLoVe"><img alt="ZeaLoVe" src="https://avatars.githubusercontent.com/u/10904090?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/ZeaLoVe">ZeaLoVe</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a></li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a></li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a></li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-05-25-databend-weekly/">This week in Databend #43</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-05-25
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is an open source <strong>elastic</strong> and <strong>reliable</strong> Modern Cloud Data Warehouse, it offers blazing fast query and combines elasticity, simplicity, low cost of the cloud, built to make the Data Cloud easy.</p>
<h2 id="big-changes">Big changes</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="features">Features</h3>
<ul>
<li>add <code>system$clustering_information</code> function (<a href="https://github.com/datafuselabs/databend/pull/5426">#5426</a>)</li>
<li>add statistics to <code>TableMeta</code> (<a href="https://github.com/datafuselabs/databend/pull/5476">#5476</a>)</li>
<li>add metasrv time travel functions (<a href="https://github.com/datafuselabs/databend/pull/5468">#5468</a> &amp; <a href="https://github.com/datafuselabs/databend/pull/5566">#5566</a>)</li>
<li>snapshot timestamp &amp; navigation (<a href="https://github.com/datafuselabs/databend/pull/5535">#5535</a>)</li>
<li>undrop table &amp; show history (<a href="https://github.com/datafuselabs/databend/pull/5562">#5562</a>)</li>
</ul>
<p><strong>Migrate to new planner</strong></p>
<ul>
<li>translate subquery into apply operator (<a href="https://github.com/datafuselabs/databend/pull/5510">#5510</a>)</li>
<li>common tree structure formatter for plan display (<a href="https://github.com/datafuselabs/databend/pull/5512">#5512</a>)</li>
<li>support <code>TRIM</code> function in new planner (<a href="https://github.com/datafuselabs/databend/pull/5541">#5541</a>) </li>
<li>support array literal in new planner (<a href="https://github.com/datafuselabs/databend/pull/5551">#5551</a>) </li>
</ul>
<p><strong>New functions</strong></p>
<ul>
<li>support <code>object_keys</code> function (<a href="https://github.com/datafuselabs/databend/pull/5461">#5461</a>)</li>
<li>support compare variant with other data types (<a href="https://github.com/datafuselabs/databend/pull/5463">#5463</a>)</li>
<li>support variant max/min functions (<a href="https://github.com/datafuselabs/databend/pull/5525">#5525</a>) </li>
<li>support variant as function (<a href="https://github.com/datafuselabs/databend/pull/5442">#5442</a>) </li>
<li>add <code>user</code> function (<a href="https://github.com/datafuselabs/databend/pull/5584">#5584</a>) </li>
</ul>
<h3 id="improvement">Improvement</h3>
<ul>
<li>replace todos in datavalues with ErrorCode (<a href="https://github.com/datafuselabs/databend/pull/5475">#5475</a>)</li>
<li>add stage quota for tenant (<a href="https://github.com/datafuselabs/databend/pull/5575">#5575</a>)</li>
<li>simplify catalog and meta (<a href="https://github.com/datafuselabs/databend/pull/5560">#5560</a>)</li>
</ul>
<p><strong>hash join performance improvement</strong></p>
<ul>
<li>optimize hash join, ~6x performance improvement (<a href="https://github.com/datafuselabs/databend/pull/5497">#5497</a>)</li>
<li>use <code>DataBlock::gather_blocks</code> in hash join, ~2x performance improvement in some cases (<a href="https://github.com/datafuselabs/databend/pull/5534">#5534</a>)</li>
</ul>
<h3 id="build-testing-ci">Build / Testing / CI</h3>
<ul>
<li>fix bugs of logic test scripts and some cases (<a href="https://github.com/datafuselabs/databend/pull/5578">#5578</a>)</li>
</ul>
<h3 id="documentation">Documentation</h3>
<ul>
<li>add i18n support with crowdin (<a href="https://github.com/datafuselabs/databend/pull/5545">#5545</a>), </li>
</ul>
<h3 id="bug-fixes">Bug fixes</h3>
<ul>
<li>fix retention aggregation coredump bug (<a href="https://github.com/datafuselabs/databend/pull/5450">#5450</a>)</li>
<li>fix server hang when parallel execute query (<a href="https://github.com/datafuselabs/databend/pull/5482">#5482</a>)</li>
<li>fix wrong output in hash join (<a href="https://github.com/datafuselabs/databend/pull/5538">#5538</a> &amp; <a href="https://github.com/datafuselabs/databend/pull/5539">#5539</a>)</li>
</ul>
<h2 id="tips">Tips</h2>
<p>Let's learn a weekly tip from Databend.</p>
<h3 id="do-conversion-funnel-analysis-with-databend">Do Conversion Funnel Analysis With Databend</h3>
<p>Funnel analysis measures the number of unique users who has performed a set of actions, and we use it to see drop-off and conversion in multi-step processes.</p>
<p><strong>Create a Table</strong></p>
<pre data-lang="SQL" style="background-color:#151515;color:#e8e8d3;" class="language-SQL "><code class="language-SQL" data-lang="SQL"><span>CREATE TABLE </span><span style="color:#fad07a;">events</span><span>(user_id </span><span style="color:#8fbfdc;">BIGINT</span><span>, event_name </span><span style="color:#8fbfdc;">VARCHAR</span><span>, event_timestamp </span><span style="color:#8fbfdc;">TIMESTAMP</span><span>);
</span></code></pre>
<p>Now we have a table with the following fields:</p>
<ul>
<li><code>user_id</code> - a unique identifier for user</li>
<li><code>event_name</code> - type of the event, like: login, visit, cart and purchase</li>
<li><code>event_timestamp</code> - timestamp which event occurred</li>
</ul>
<p><strong>Funnel Analysis</strong></p>
<p>It's easy and performance to use Databend WINDOW_FUNNEL Function to find out how far the user <code>user_id</code> could get through the chain in an hour window slides.</p>
<pre data-lang="SQL" style="background-color:#151515;color:#e8e8d3;" class="language-SQL "><code class="language-SQL" data-lang="SQL"><span>SELECT
</span><span>    level,
</span><span>    count() AS count
</span><span>FROM
</span><span>(
</span><span>    SELECT
</span><span>        user_id,
</span><span>        window_funnel(</span><span style="color:#cf6a4c;">3600000000</span><span>)(event_timestamp, 
</span><span>        event_name = </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">login</span><span style="color:#556633;">&#39;</span><span>, event_name = </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">visit</span><span style="color:#556633;">&#39;</span><span>, 
</span><span>        event_name = </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">cart</span><span style="color:#556633;">&#39;</span><span>, event_name = </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">purchase</span><span style="color:#556633;">&#39;</span><span>) AS level
</span><span>    FROM events
</span><span>    GROUP BY user_id
</span><span>)
</span><span>GROUP BY level ORDER BY level ASC;
</span></code></pre>
<p><strong>Learn more:</strong></p>
<ul>
<li><a href="https://databend.rs/doc/learn/analyze-funnel-with-databend">How to Do Conversion Funnel Analysis With Databend</a></li>
<li><a href="https://databend.rs/doc/learn/analyze-funnel-with-databend">Doc | Databend <code>WINDOW_FUNNEL</code> Function</a></li>
<li><a href="https://github.com/datafuselabs/databend/blob/main/common/functions/src/aggregates/aggregate_window_funnel.rs">Source Code | Databend <code>WINDOW_FUNNEL</code> Function</a></li>
</ul>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.60-nightly">v0.7.60-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.59-nightly">v0.7.59-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.58-nightly">v0.7.58-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.57-nightly">v0.7.57-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.56-nightly">v0.7.56-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.55-nightly">v0.7.55-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.54-nightly">v0.7.54-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.53-nightly">v0.7.53-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/ariesdevil"><img alt="ariesdevil" src="https://avatars.githubusercontent.com/u/7812909?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Chasen-Zhang"><img alt="Chasen-Zhang" src="https://avatars.githubusercontent.com/u/15354455?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/drmingdrmer"><img alt="drmingdrmer" src="https://avatars.githubusercontent.com/u/44069?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/ariesdevil">ariesdevil</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/Chasen-Zhang">Chasen-Zhang</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td><td align="center"><a href="https://github.com/drmingdrmer">drmingdrmer</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/fkuner"><img alt="fkuner" src="https://avatars.githubusercontent.com/u/39162698?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/flaneur2020"><img alt="flaneur2020" src="https://avatars.githubusercontent.com/u/129800?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/hantmac"><img alt="hantmac" src="https://avatars.githubusercontent.com/u/7600925?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/hanyisong"><img alt="hanyisong" src="https://avatars.githubusercontent.com/u/71937758?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/junnplus"><img alt="junnplus" src="https://avatars.githubusercontent.com/u/8097526?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td><td align="center"><a href="https://github.com/fkuner">fkuner</a></td><td align="center"><a href="https://github.com/flaneur2020">flaneur2020</a></td><td align="center"><a href="https://github.com/hantmac">hantmac</a></td><td align="center"><a href="https://github.com/hanyisong">hanyisong</a></td><td align="center"><a href="https://github.com/junnplus">junnplus</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/Kikkon"><img alt="Kikkon" src="https://avatars.githubusercontent.com/u/19528375?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/leiysky"><img alt="leiysky" src="https://avatars.githubusercontent.com/u/22445410?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/Kikkon">Kikkon</a></td><td align="center"><a href="https://github.com/leiysky">leiysky</a></td><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ygf11"><img alt="ygf11" src="https://avatars.githubusercontent.com/u/3428089?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ZeaLoVe"><img alt="ZeaLoVe" src="https://avatars.githubusercontent.com/u/10904090?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/ygf11">ygf11</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/ZeaLoVe">ZeaLoVe</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/zhang2014"><img alt="zhang2014" src="https://avatars.githubusercontent.com/u/8087042?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ZhiHanZ"><img alt="ZhiHanZ" src="https://avatars.githubusercontent.com/u/25170437?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ZuoFuhong"><img alt="ZuoFuhong" src="https://avatars.githubusercontent.com/u/19775205?v=4&s=117" width="117"></a></th><th align="center"></th><th align="center"></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/zhang2014">zhang2014</a></td><td align="center"><a href="https://github.com/ZhiHanZ">ZhiHanZ</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td><td align="center"><a href="https://github.com/ZuoFuhong">ZuoFuhong</a></td><td align="center"></td><td align="center"></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a></li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a></li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a></li>
</ul>

        </div>

                </div>
            <div class="pagination">
                <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://weekly.databend.rs/page/7/">
                            <span class="button__icon"></span>&nbsp;
                            <span class="button__text">Newer posts</span>
                        </a>
                    </span>
                
                    <span class="button next">
                        <a href="https://weekly.databend.rs/page/9/">
                            <span class="button__text">Older posts</span>&nbsp;
                            <span class="button__icon"></span>
                        </a>
                    </span>
                </div>
            </div>
        </div>
        
    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span> 
    2023
 Datafuse Labs</span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
