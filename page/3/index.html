<!DOCTYPE html>
<html lang="en">

<head>
    <title>Databend Weekly</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://weekly.databend.rs/style.css">
    <link rel="stylesheet" href="https://weekly.databend.rs/color/blue.css">

    <link rel="stylesheet" href="https://weekly.databend.rs/font-hack.css">

    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://weekly.databend.rs" style="text-decoration: none;">
                    <div class="logo">
                            Databend Weekly
                        </div>
                </a>
            </div>
        </div>

        <nav class="menu">
            <ul class="menu__inner">
                
                <li class="active"><a href="https://weekly.databend.rs">weekly</a></li>
            
                <li><a href="https://weekly.databend.rs/archive">archive</a></li>
            
                <li><a href="https://github.com/datafuselabs/databend" target="_blank" rel="noopener noreferrer">github</a></li>
            
                <li><a href="https://databend.rs/" target="_blank" rel="noopener noreferrer">docs</a></li>
            
                <li><a href="https://weekly.databend.rs/rss.xml">rss</a></li>
            </ul>
        </nav>
    
    </header>
    

    <div class="content">
        
        <div class="posts">
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-11-30-databend-weekly/">This week in Databend #70</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-11-30
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is a powerful cloud data warehouse. Built for elasticity and efficiency. Free and open. Also available in the cloud: <a href="https://app.databend.com">https://app.databend.com</a> .</p>
<blockquote>
<p><strong>Special Note:</strong> <a href="https://weekly.databend.rs/"><em>This Week in Databend</em></a> will be gradually migrated to the <a href="https://databend.rs/blog"><em>Databend Blog</em></a>. We will keep the content in sync until the final migration is complete.</p>
</blockquote>
<h2 id="what-s-new">What's New</h2>
<p>Check out what we've done this week to make Databend even better for you.</p>
<h3 id="features-improvements-sparkles">Features &amp; Improvements ✨</h3>
<p><strong>Format</strong></p>
<ul>
<li>better checking of format options (<a href="https://github.com/datafuselabs/databend/pull/8981">#8981</a>)</li>
<li>add basic schema infer for parquet (<a href="https://github.com/datafuselabs/databend/pull/9043">#9043</a>)</li>
</ul>
<p><strong>Query</strong></p>
<ul>
<li>QualifiedName support 'db.table.<em>' and 'table.</em>' (<a href="https://github.com/datafuselabs/databend/pull/8965">#8965</a>)</li>
<li>support bulk insert without exprssion (<a href="https://github.com/datafuselabs/databend/pull/8966">#8966</a>)</li>
</ul>
<p><strong>Storage</strong></p>
<ul>
<li>add cache layer for fuse engine (<a href="https://github.com/datafuselabs/databend/pull/8830">#8830</a>)</li>
<li>add system table system.memory_statistics (<a href="https://github.com/datafuselabs/databend/pull/8945">#8945</a>)</li>
<li>add optimize statistic ddl support (<a href="https://github.com/datafuselabs/databend/pull/8891">#8891</a>)</li>
</ul>
<h3 id="code-refactoring-tada">Code Refactoring 🎉</h3>
<p><strong>Base</strong></p>
<ul>
<li>remove common macros (<a href="https://github.com/datafuselabs/databend/pull/8936">#8936</a>)</li>
</ul>
<p><strong>Format</strong></p>
<ul>
<li>TypeDeserializer get rid of FormatSetting (<a href="https://github.com/datafuselabs/databend/pull/8950">#8950</a>)</li>
</ul>
<p><strong>Planner</strong></p>
<ul>
<li>refactor extract or predicate (<a href="https://github.com/datafuselabs/databend/pull/8951">#8951</a>)</li>
</ul>
<p><strong>Processors</strong></p>
<ul>
<li>optimize join by merging build data block (<a href="https://github.com/datafuselabs/databend/pull/8961">#8961</a>)</li>
</ul>
<p><strong>New Expression</strong></p>
<ul>
<li>allow sparse column id in chunk, redo <a href="https://github.com/datafuselabs/databend/pull/8789">#8789</a> with a new approach. (<a href="https://github.com/datafuselabs/databend/pull/9008">#9008</a>)</li>
</ul>
<h3 id="documentation-notebook-with-decorative-cover">Documentation 📔</h3>
<ul>
<li>i18n support with crowdin (<a href="https://github.com/datafuselabs/databend/pull/8987">#8987</a>, <a href="https://github.com/datafuselabs/databend/pull/8997">#8997</a>, etc.)</li>
</ul>
<h3 id="bug-fixes-wrench">Bug Fixes 🔧</h3>
<p><strong>Base</strong></p>
<ul>
<li>try fix lost tracker (<a href="https://github.com/datafuselabs/databend/pull/8932">#8932</a>)</li>
</ul>
<p><strong>Meta</strong></p>
<ul>
<li>fix share db bug, create DatabaseIdToName if need (<a href="https://github.com/datafuselabs/databend/pull/9006">#9006</a>)</li>
</ul>
<p><strong>Mysql handler</strong></p>
<ul>
<li>fix mysql conns leak (<a href="https://github.com/datafuselabs/databend/pull/8894">#8894</a>)</li>
</ul>
<p><strong>Processors</strong></p>
<ul>
<li>try fix update list memory leak (<a href="https://github.com/datafuselabs/databend/pull/9023">#9023</a>)</li>
</ul>
<p><strong>Storage</strong></p>
<ul>
<li>read and write block in parallel when compact (<a href="https://github.com/datafuselabs/databend/pull/8921">#8921</a>)</li>
</ul>
<h2 id="what-s-on-in-databend">What's On In Databend</h2>
<p>Stay connected with the latest news about Databend.</p>
<h4 id="infer-schema-at-a-glance">Infer Schema at a Glance</h4>
<p>You usually need to create a table before loading data from a file stored on a stage or somewhere. Unfortunately, sometimes you might not know the file schema to create the table or are unable to input the schema due to its complexity. </p>
<p>Introducing the capability to infer schema from an existing file will make the work much easier. You will even be able to query data directly from a stage using a SELECT statement like <code>select * from @my_stage</code>.</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>INFER </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">s3://mybucket/data.csv</span><span style="color:#556633;">&#39;</span><span> FILE_FORMAT = ( TYPE = CSV );
</span><span>+</span><span style="color:#888888;">-------------+---------+----------+
</span><span>| COLUMN_NAME | TYPE    | NULLABLE |
</span><span>|</span><span style="color:#888888;">-------------+---------+----------|
</span><span>| CONTINENT   | </span><span style="color:#8fbfdc;">TEXT</span><span>    | True     |
</span><span>| COUNTRY     | VARIANT | True     |
</span><span>+</span><span style="color:#888888;">-------------+---------+----------+
</span></code></pre>
<p>We've added support for inferring the basic schema from parquet files in <a href="https://github.com/datafuselabs/databend/pull/9043">#9043</a>, and we're now working on <a href="https://github.com/datafuselabs/databend/issues/7211">#7211</a> to implement <code>select from @stage</code>.</p>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/pull/9043">PR | add basic schema infer for parquet</a></li>
<li><a href="https://github.com/datafuselabs/databend/pull/7211">Issue | query data from S3 location or stage</a></li>
<li><a href="https://github.com/datafuselabs/databend/pull/8645">PR | rfc: Infer Schema</a></li>
</ul>
<h2 id="what-s-up-next">What's Up Next</h2>
<p>We're always open to cutting-edge technologies and innovative ideas. You're more than welcome to join the community and bring them to Databend.</p>
<h4 id="add-tls-support-for-mysql-handler">Add Tls Support for Mysql Handler</h4>
<p><a href="https://github.com/datafuselabs/opensrv/discussions/35">opensrv-mysql v0.3.0</a> that was released recently includes support for TLS. It sounds like a good idea to introduce it to Databend.</p>
<pre data-lang="rust" style="background-color:#151515;color:#e8e8d3;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#8fbfdc;">let </span><span>(is_ssl, init_params) = opensrv_mysql::AsyncMysqlIntermediary::init_before_ssl(
</span><span>    &amp;</span><span style="color:#8fbfdc;">mut</span><span> shim,
</span><span>    &amp;</span><span style="color:#8fbfdc;">mut</span><span> r,
</span><span>    &amp;</span><span style="color:#8fbfdc;">mut</span><span> w,
</span><span>    &amp;Some(tls_config.clone()),
</span><span>)
</span><span>.await
</span><span>.unwrap();
</span><span>
</span><span>opensrv_mysql::secure_run_with_options(shim, w, ops, tls_config, init_params).await
</span></code></pre>
<p><a href="https://github.com/datafuselabs/databend/issues/8983">Issue 8983: Feature: tls support for mysql handler</a></p>
<p>Please let us know if you're interested in contributing to this issue, or pick up a good first issue at <a href="https://link.databend.rs/i-m-feeling-lucky">https://link.databend.rs/i-m-feeling-lucky</a> to get started.</p>
<h2 id="changelog">Changelog</h2>
<p>You can check the changelog of Databend Nightly for details about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.136-nightly">v0.8.136-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.135-nightly">v0.8.135-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.134-nightly">v0.8.134-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.133-nightly">v0.8.133-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.132-nightly">v0.8.132-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.131-nightly">v0.8.131-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.130-nightly">v0.8.130-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.129-nightly">v0.8.129-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.128-nightly">v0.8.128-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.127-nightly">v0.8.127-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.126-nightly">v0.8.126-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/ariesdevil"><img alt="ariesdevil" src="https://avatars.githubusercontent.com/u/7812909?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/drmingdrmer"><img alt="drmingdrmer" src="https://avatars.githubusercontent.com/u/44069?v=4&s=117" width="117" /></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/ariesdevil">ariesdevil</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td><td align="center"><a href="https://github.com/drmingdrmer">drmingdrmer</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/flaneur2020"><img alt="flaneur2020" src="https://avatars.githubusercontent.com/u/129800?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/leiysky"><img alt="leiysky" src="https://avatars.githubusercontent.com/u/22445410?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/PsiACE"><img alt="PsiACE" src="https://avatars.githubusercontent.com/u/36896360?v=4&s=117" width="117" /></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td><td align="center"><a href="https://github.com/flaneur2020">flaneur2020</a></td><td align="center"><a href="https://github.com/leiysky">leiysky</a></td><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/PsiACE">PsiACE</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/sandflee"><img alt="sandflee" src="https://avatars.githubusercontent.com/u/5102100?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/TracyZYJ"><img alt="TracyZYJ" src="https://avatars.githubusercontent.com/u/37072511?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117" /></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/sandflee">sandflee</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/TracyZYJ">TracyZYJ</a></td><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/yufan022"><img alt="yufan022" src="https://avatars.githubusercontent.com/u/30121694?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/zhang2014"><img alt="zhang2014" src="https://avatars.githubusercontent.com/u/8087042?v=4&s=117" width="117" /></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117" /></a></th><th align="center"></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/yufan022">yufan022</a></td><td align="center"><a href="https://github.com/zhang2014">zhang2014</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td><td align="center"></td></tr>
</tbody></table>
<h2 id="connect-with-us">Connect With Us</h2>
<p>We'd love to hear from you. Feel free to run the code and see if Databend works for you. Submit an issue with your problem if you need help.</p>
<p><a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> is open to everyone who loves data warehouses. Please join the community and share your thoughts.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a> (Feature/Bug reports, Contributions)</li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a> (Get the news fast)</li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a> (For live discussion with the Community)</li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-11-23-databend-weekly/">This week in Databend #69</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-11-23
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is a powerful cloud data warehouse. Built for elasticity and efficiency. Free and open. Also available in the cloud: <a href="https://app.databend.com">https://app.databend.com</a> .</p>
<h2 id="what-s-changed">What's Changed</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="exciting-new-features-sparkles">Exciting New Features ✨</h3>
<p><strong>multiple catalog</strong></p>
<ul>
<li>implement drop user defined catalog (<a href="https://github.com/datafuselabs/databend/pull/8820">#8820</a>)</li>
</ul>
<p><strong>meta</strong></p>
<ul>
<li>add cli command to delete a key and to expire a key (<a href="https://github.com/datafuselabs/databend/pull/8858">#8858</a>)</li>
</ul>
<p><strong>planner</strong></p>
<ul>
<li>support broadcast join (<a href="https://github.com/datafuselabs/databend/pull/8779">#8779</a>)</li>
<li>extract or clause to push down potential predicates for join (<a href="https://github.com/datafuselabs/databend/pull/8855">#8855</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>optimize count(Nullable(col)) (<a href="https://github.com/datafuselabs/databend/pull/8805">#8805</a>)</li>
<li>support unset settings (<a href="https://github.com/datafuselabs/databend/pull/8870">#8870</a>)</li>
<li>add distinct count aggregator and column distinct count (<a href="https://github.com/datafuselabs/databend/pull/8825">#8825</a>)</li>
</ul>
<p><strong>storage</strong></p>
<ul>
<li>compact segments in reversed order (<a href="https://github.com/datafuselabs/databend/pull/8793">#8806</a>)</li>
</ul>
<p><strong>new expression</strong></p>
<ul>
<li>geo functions (<a href="https://github.com/datafuselabs/databend/pull/8481">#8481</a>)</li>
<li>add methods to get memory size of <code>ValueType</code>s (<a href="https://github.com/datafuselabs/databend/pull/8875">#8875</a>)</li>
<li>add a global builtin function registry (<a href="https://github.com/datafuselabs/databend/pull/8912">#8912</a>)</li>
</ul>
<h3 id="code-refactor-tada">Code Refactor 🎉</h3>
<p><strong>memory tracker</strong></p>
<ul>
<li>send pointer addresses to mem tracker (<a href="https://github.com/datafuselabs/databend/pull/8879">#8879</a>)</li>
<li>add <code>StatBuffer</code> to provide fine grained mem allocation stats buffer (<a href="https://github.com/datafuselabs/databend/pull/8880">#8880</a>)</li>
</ul>
<p><strong>new expression</strong></p>
<ul>
<li>allow sparse column id for constant folder (<a href="https://github.com/datafuselabs/databend/pull/8821">#8821</a>)</li>
</ul>
<h3 id="build-testing-ci-infra-changes-electric-plug">Build/Testing/CI Infra Changes 🔌</h3>
<ul>
<li>separate sqllogic test with handler (<a href="https://github.com/datafuselabs/databend/pull/8836">#8836</a>)</li>
</ul>
<h3 id="thoughtful-bug-fix-wrench">Thoughtful Bug Fix 🔧</h3>
<p><strong>base</strong></p>
<ul>
<li>support track processor async task (<a href="https://github.com/datafuselabs/databend/pull/8871">#8871</a>)</li>
</ul>
<p><strong>http handler</strong></p>
<ul>
<li>avoid dropping runtime when task on it not finished (<a href="https://github.com/datafuselabs/databend/pull/8894">#8894</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>remove useless memcpy when group long string (<a href="https://github.com/datafuselabs/databend/pull/8851">#8851</a>)</li>
</ul>
<p><strong>storage</strong></p>
<ul>
<li>snapshot removed unsafely during meta commit failure (<a href="https://github.com/datafuselabs/databend/pull/8850">#8850</a>)</li>
</ul>
<h2 id="news">News</h2>
<p>Let's take a look at what's new at Datafuse Labs &amp; Databend each week.</p>
<h4 id="preview-of-new-expressions-geo-functions">Preview of New Expressions: Geo Functions</h4>
<p>By supporting Geo functions, Databend will have the ability to perform operations on geographic inputs.</p>
<p>With the merging of <a href="https://github.com/datafuselabs/databend/pull/8481">#8481</a>, geo functions like <code>great_circle_distance</code>, <code>geo_distance</code>, <code>great_circle_angle</code> and <code>point_in_ellipses</code> are already supported in the new expression system.</p>
<p>Databend is currently actively working on the migration to the new expressions, so keep an eye on the <a href="https://github.com/datafuselabs/databend/tree/expression">expression</a> branch for progress!</p>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/pull/8481">PR | geo functions</a></li>
</ul>
<h4 id="unset-settings">Unset Settings</h4>
<p>The merging of <a href="https://github.com/datafuselabs/databend/pull/8870">#8870</a> brings the ability to unset settings to Databend</p>
<p><code>UNSET</code> means to restore one or more settings to their default values. The settings will also be reset to the initial SESSION level if they were set to GLOBAL level.</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>UNSET &lt;setting_name&gt; | ( &lt;setting_name&gt; [, &lt;setting_name&gt; ...])
</span></code></pre>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/pull/8870">PR | support unset settings</a></li>
<li><a href="https://databend.rs/doc/sql-commands/setting-cmds/unset">Docs | UNSET</a></li>
</ul>
<h2 id="issues">Issues</h2>
<p>Meet issues you may be interested in and try to solve it.</p>
<h4 id="add-compression-option-to-create-table">Add Compression Option to Create Table</h4>
<p>Compression helps to reduce the size of databases. For IO-intensive loads, compression may provide some performance improvements.</p>
<p>Databend plans to introduce <code>compression</code> option in the <code>create table</code> statement and support compression algorithms such as LZ4 (default) and Snappy.</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>create table </span><span style="color:#fad07a;">t1</span><span>(a </span><span style="color:#8fbfdc;">int</span><span>) [compression=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">LZ4|SNAPPY</span><span style="color:#556633;">&quot;</span><span>]
</span></code></pre>
<p><a href="https://github.com/datafuselabs/databend/issues/8903">Issue 8903: feat: add compression option to create table</a></p>
<p>If you find it interesting, try to solve it or participate in discussions and PR reviews. Or you can click on <a href="https://link.databend.rs/i-m-feeling-lucky">https://link.databend.rs/i-m-feeling-lucky</a> to pick up a good first issue, good luck!</p>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.125-nightly">v0.8.125-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.124-nightly">v0.8.124-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.123-nightly">v0.8.123-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.122-nightly">v0.8.122-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.121-nightly">v0.8.121-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.120-nightly">v0.8.120-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.119-nightly">v0.8.119-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.118-nightly">v0.8.118-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.117-nightly">v0.8.117-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.116-nightly">v0.8.116-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ariesdevil"><img alt="ariesdevil" src="https://avatars.githubusercontent.com/u/7812909?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Chasen-Zhang"><img alt="Chasen-Zhang" src="https://avatars.githubusercontent.com/u/15354455?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ClSlaid"><img alt="ClSlaid" src="https://avatars.githubusercontent.com/u/44747719?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/ariesdevil">ariesdevil</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/Chasen-Zhang">Chasen-Zhang</a></td><td align="center"><a href="https://github.com/ClSlaid">ClSlaid</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/drmingdrmer"><img alt="drmingdrmer" src="https://avatars.githubusercontent.com/u/44069?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/kemingy"><img alt="kemingy" src="https://avatars.githubusercontent.com/u/12974685?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td><td align="center"><a href="https://github.com/drmingdrmer">drmingdrmer</a></td><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td><td align="center"><a href="https://github.com/kemingy">kemingy</a></td><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/RinChanNOWWW"><img alt="RinChanNOWWW" src="https://avatars.githubusercontent.com/u/33975039?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/wubx"><img alt="wubx" src="https://avatars.githubusercontent.com/u/320680?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/RinChanNOWWW">RinChanNOWWW</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/wubx">wubx</a></td><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhang2014"><img alt="zhang2014" src="https://avatars.githubusercontent.com/u/8087042?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th><th align="center"></th><th align="center"></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/zhang2014">zhang2014</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td><td align="center"></td><td align="center"></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://weekly.databend.rs/">Weekly</a> (A weekly newsletter about Databend)</li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a> (Feature/Bug reports, Contributions)</li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a> (Get the news fast)</li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a> (For live discussion with the Community)</li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-11-16-databend-weekly/">This week in Databend #68</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-11-16
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is a powerful cloud data warehouse. Built for elasticity and efficiency. Free and open. Also available in the cloud: <a href="https://app.databend.com">https://app.databend.com</a> .</p>
<h2 id="what-s-changed">What's Changed</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="exciting-new-features-sparkles">Exciting New Features ✨</h3>
<p><strong>metrics</strong></p>
<ul>
<li>add metrics for query detail (<a href="https://github.com/datafuselabs/databend/pull/8800">#8800</a>)</li>
</ul>
<p><strong>multiple catalog</strong></p>
<ul>
<li>multiple catalog config (<a href="https://github.com/datafuselabs/databend/pull/8743">#8743</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>adjust max io requests when read block data to avoid oom (<a href="https://github.com/datafuselabs/databend/pull/8726">#8726</a>)</li>
<li>change <code>PrecommitBlock</code> serde from <code>serde_json</code> to <code>bincode</code> (<a href="https://github.com/datafuselabs/databend/pull/8726">#8726</a>)</li>
<li>support parallel final aggregator, 4X faster! (<a href="https://github.com/datafuselabs/databend/pull/8577">#8577</a>)</li>
<li>parallel merge for distribute query (<a href="https://github.com/datafuselabs/databend/pull/8811">#8811</a>)</li>
</ul>
<p><strong>storage</strong></p>
<ul>
<li>shuffle segments during distributed pruning (<a href="https://github.com/datafuselabs/databend/pull/8793">#8793</a>)</li>
<li>add shuffle policy for Partitions (<a href="https://github.com/datafuselabs/databend/pull/8814">#8814</a>)</li>
</ul>
<p><strong>new expression</strong></p>
<ul>
<li>add calc domain for comparison (<a href="https://github.com/datafuselabs/databend/pull/8754">#8754</a>)</li>
</ul>
<h3 id="code-refactor-tada">Code Refactor 🎉</h3>
<p><strong>io</strong></p>
<ul>
<li>replace <code>NestedCheckpointReader</code> with <code>Cursor</code> (<a href="https://github.com/datafuselabs/databend/pull/8716">#8716</a>)</li>
</ul>
<p><strong>handler</strong></p>
<ul>
<li>use <code>FieldEncoder</code> to encode data (<a href="https://github.com/datafuselabs/databend/pull/8733">#8733</a>)</li>
</ul>
<p><strong>format</strong></p>
<ul>
<li>refactor with <code>FieldEncoder</code> (<a href="https://github.com/datafuselabs/databend/pull/8778">#8778</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>unified hashtable interface (<a href="https://github.com/datafuselabs/databend/pull/8681">#8681</a>)</li>
</ul>
<p><strong>storage</strong></p>
<ul>
<li>compact block (<a href="https://github.com/datafuselabs/databend/pull/8679">#8679</a>)</li>
</ul>
<p><strong>new expression</strong></p>
<ul>
<li>refine domain (<a href="https://github.com/datafuselabs/databend/pull/8755">#8755</a>)</li>
<li>allow sparse column id in chunk (<a href="https://github.com/datafuselabs/databend/pull/8789">#8789</a>)</li>
</ul>
<h3 id="thoughtful-bug-fix-wrench">Thoughtful Bug Fix 🔧</h3>
<p><strong>handler</strong></p>
<ul>
<li>correct databend types to mysql types (<a href="https://github.com/datafuselabs/databend/pull/8745">#8745</a>)</li>
</ul>
<p><strong>functions</strong></p>
<ul>
<li><code>l_col like r_col</code> will generate a hashmap based on <code>r_col</code>, if <code>r_col</code> is huge, it will be oom kill (<a href="https://github.com/datafuselabs/databend/pull/8737">#8737</a>)</li>
</ul>
<h2 id="news">News</h2>
<p>Let's take a look at what's new at Datafuse Labs &amp; Databend each week.</p>
<h4 id="shuffle-policy-for-partitions">Shuffle Policy for Partitions</h4>
<p>For cache affinity, we consider some strategies when re-shuffle partitions in <code>plan_fragemnt.rs::redistribute_source_fragment</code>, default kind is <code>Seq</code>.</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>pub enum PartitionsShuffleKind {
</span><span>    // Bind the Partition to executor one by one with order.
</span><span>    Seq,
</span><span>    // Bind the Partition to executor by partition.hash()%executor_nums order.
</span><span>    Mod,
</span><span>    // Bind the Partition to executor by partition.rand() order.
</span><span>    Rand,
</span><span>}
</span></code></pre>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/pull/8814">PR | add shuffle policy for Partitions</a></li>
</ul>
<h4 id="databend-x-rust-china-hackathon-2022">Databend x Rust China Hackathon 2022</h4>
<p>The first <em>Rust China Hackathon Online</em> is here! The theme of this year's Hackathon is <strong>Rust for Fun</strong> and we look forward to working with you to unleash the possibilities of innovation with Rust.</p>
<p>As a co-organiser of this year's hackathon, Databend is sponsoring an enterprise track where participants can explore the appeal of cloud-native data warehouses by creating work around Databend components or the Databend ecosystem.</p>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://github.com/datafuselabs/hackathon2022">GitHub -  datafuselabs / hackathon2022</a></li>
</ul>
<h2 id="issues">Issues</h2>
<p>Meet issues you may be interested in and try to solve it.</p>
<h4 id="switch-to-nextest-in-ci">Switch to nextest in CI</h4>
<p><code>cargo-nextest</code> is a next-generation test runner for Rust projects.</p>
<p>We have noticed that it is very much faster than <code>cargo test</code> on many projects. However, there are still some challenges in applying this to Databend. For example, for different types of tests, the number of threads has to be adjusted to ensure that the tests are performed quickly and correctly. Also, some of the tests may need to be rewritten to get better results.</p>
<p><a href="https://github.com/datafuselabs/databend/issues/4376">Issue 4376: switch to nexttest in ci</a></p>
<p>If you find it interesting, try to solve it or participate in discussions and PR reviews. Or you can click on <a href="https://link.databend.rs/i-m-feeling-lucky">https://link.databend.rs/i-m-feeling-lucky</a> to pick up a good first issue, good luck!</p>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.115-nightly">v0.8.115-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.114-nightly">v0.8.114-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.113-nightly">v0.8.113-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.112-nightly">v0.8.112-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.111-nightly">v0.8.111-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.110-nightly">v0.8.110-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.109-nightly">v0.8.109-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.108-nightly">v0.8.108-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.107-nightly">v0.8.107-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.106-nightly">v0.8.106-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ClSlaid"><img alt="ClSlaid" src="https://avatars.githubusercontent.com/u/44747719?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/dependabot"><img alt="dependabot[bot]" src="https://avatars.githubusercontent.com/in/29110?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/ClSlaid">ClSlaid</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td><td align="center"><a href="https://github.com/apps/dependabot">dependabot[bot]</a></td><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/RinChanNOWWW"><img alt="RinChanNOWWW" src="https://avatars.githubusercontent.com/u/33975039?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sandflee"><img alt="sandflee" src="https://avatars.githubusercontent.com/u/5102100?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/RinChanNOWWW">RinChanNOWWW</a></td><td align="center"><a href="https://github.com/sandflee">sandflee</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/wubx"><img alt="wubx" src="https://avatars.githubusercontent.com/u/320680?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhang2014"><img alt="zhang2014" src="https://avatars.githubusercontent.com/u/8087042?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/wubx">wubx</a></td><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/zhang2014">zhang2014</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/ZhiHanZ"><img alt="ZhiHanZ" src="https://avatars.githubusercontent.com/u/25170437?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/ZhiHanZ">ZhiHanZ</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://weekly.databend.rs/">Weekly</a> (A weekly newsletter about Databend)</li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a> (Feature/Bug reports, Contributions)</li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a> (Get the news fast)</li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a> (For live discussion with the Community)</li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-11-09-databend-weekly/">This week in Databend #67</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-11-09
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is a powerful cloud data warehouse. Built for elasticity and efficiency. Free and open. Also available in the cloud: <a href="https://app.databend.com">https://app.databend.com</a> .</p>
<h2 id="what-s-changed">What's Changed</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="exciting-new-features-sparkles">Exciting New Features ✨</h3>
<p><strong>toolchain</strong></p>
<ul>
<li>upgrade to 1.67 nightly (<a href="https://github.com/datafuselabs/databend/pull/8631">#8631</a>)</li>
</ul>
<p><strong>multiple catalog</strong></p>
<ul>
<li>multiple catalog create (planner and catalog manager) (<a href="https://github.com/datafuselabs/databend/pull/8620">#8620</a>)</li>
</ul>
<p><strong>compact</strong></p>
<ul>
<li>optimize compact for data load (<a href="https://github.com/datafuselabs/databend/pull/8644">#8644</a>)</li>
</ul>
<p><strong>planner</strong></p>
<ul>
<li>optimize left/single join (<a href="https://github.com/datafuselabs/databend/pull/8583">#8583</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>support copy from xml (<a href="https://github.com/datafuselabs/databend/pull/8404">#8404</a>)</li>
<li>add collation (<a href="https://github.com/datafuselabs/databend/pull/8610">#8610</a>)</li>
<li>copy files order by last modified time asc (<a href="https://github.com/datafuselabs/databend/pull/8628">#8628</a>)</li>
<li>improve sort, 10%~50% faster than the old one (<a href="https://github.com/datafuselabs/databend/pull/8452">#8452</a>)</li>
</ul>
<p><strong>new expression</strong></p>
<ul>
<li>add to_xxx() cast functions (<a href="https://github.com/datafuselabs/databend/pull/8599">#8599</a>)</li>
<li>add inlist expr in new expression (<a href="https://github.com/datafuselabs/databend/pull/8676">#8676</a>)</li>
</ul>
<h3 id="code-refactor-tada">Code Refactor 🎉</h3>
<p><strong>format</strong></p>
<ul>
<li>refactor output format with FieldEncoders (<a href="https://github.com/datafuselabs/databend/pull/8700">#8700</a>)</li>
</ul>
<p><strong>planner</strong></p>
<ul>
<li>move plan from query/planner to sql/planner (<a href="https://github.com/datafuselabs/databend/pull/8660">#8660</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>remove sqlparser-rs (<a href="https://github.com/datafuselabs/databend/pull/8670">#8670</a>)</li>
<li>try move list files to read_partitions (<a href="https://github.com/datafuselabs/databend/pull/8673">#8673</a>)</li>
</ul>
<p><strong>storage</strong></p>
<ul>
<li>move and group sub-crates in storages (<a href="https://github.com/datafuselabs/databend/pull/8613">#8613</a>, <a href="https://github.com/datafuselabs/databend/pull/8621">#8621</a>, <a href="https://github.com/datafuselabs/databend/pull/8627">#8627</a>, etc.)</li>
<li>compact segments, which strictly preserves the order of ingestion (<a href="https://github.com/datafuselabs/databend/pull/8590">#8590</a>)</li>
</ul>
<p><strong>new expression</strong></p>
<ul>
<li>migrate deserializations to expression (<a href="https://github.com/datafuselabs/databend/pull/8637">#8637</a>)</li>
<li>use to_xxx() to evaluate CAST(xxx AS xxx) (<a href="https://github.com/datafuselabs/databend/pull/8637">#8637</a>)</li>
</ul>
<h3 id="build-testing-ci-infra-changes-electric-plug">Build/Testing/CI Infra Changes 🔌</h3>
<ul>
<li>rust-toolchain nightly 1.67.0 (nightly-2022-11-07) (<a href="https://github.com/datafuselabs/databend/pull/8641">#8641</a>)</li>
</ul>
<h3 id="thoughtful-bug-fix-wrench">Thoughtful Bug Fix 🔧</h3>
<p><strong>compatibility</strong></p>
<ul>
<li>problem when using Trino Mysql connector (<a href="https://github.com/datafuselabs/databend/pull/8668">#8668</a>)</li>
</ul>
<p><strong>meta</strong></p>
<ul>
<li>emit kv change events after committing a transaction (<a href="https://github.com/datafuselabs/databend/pull/8674">#8674</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>union's pairs are handled incorrectly (<a href="https://github.com/datafuselabs/databend/pull/8638">#8638</a>)</li>
<li>max_threads can not determined automatically (<a href="https://github.com/datafuselabs/databend/pull/8707">#8707</a>)</li>
</ul>
<h2 id="news">News</h2>
<p>Let's take a look at what's new at Datafuse Labs &amp; Databend each week.</p>
<h4 id="support-copy-from-xml">Support Copy from XML</h4>
<p>After <a href="https://github.com/datafuselabs/databend/pull/8404">#8404</a> was merged, Databend now offers support for loading data from XML formatted files.</p>
<p>Similar to the use of other formats, in the SQL statement it is only necessary to set the <code>format</code> option to <code>XML</code> and an example of using the streaming load API is given below.</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>curl -sH </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">insert_sql:insert into test_xml format XML</span><span style="color:#556633;">&quot;</span><span> \
</span><span>-F </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">upload=@/tmp/simple_v1.xml</span><span style="color:#556633;">&quot;</span><span> \
</span><span>-u root: -XPUT </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">http://localhost:${QUERY_HTTP_HANDLER_PORT}/v1/streaming_load</span><span style="color:#556633;">&quot;
</span></code></pre>
<p>The content of your XML file needs to match one or more of the following types:</p>
<ul>
<li>Column names as attributes and column values as attribute values:</li>
</ul>
<pre data-lang="xml" style="background-color:#151515;color:#e8e8d3;" class="language-xml "><code class="language-xml" data-lang="xml"><span>&lt;</span><span style="color:#ffb964;">row column1</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">value1</span><span style="color:#556633;">&quot; </span><span style="color:#ffb964;">column2</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">value2</span><span style="color:#556633;">&quot; </span><span>.../&gt;
</span></code></pre>
<ul>
<li>Column names as tags and column values as the content of these tags: </li>
</ul>
<pre data-lang="xml" style="background-color:#151515;color:#e8e8d3;" class="language-xml "><code class="language-xml" data-lang="xml"><span>&lt;</span><span style="color:#ffb964;">row</span><span>&gt;
</span><span>  &lt;</span><span style="color:#ffb964;">column1</span><span>&gt;value1&lt;/</span><span style="color:#ffb964;">column1</span><span>&gt;
</span><span>  &lt;</span><span style="color:#ffb964;">column2</span><span>&gt;value2&lt;/</span><span style="color:#ffb964;">column2</span><span>&gt;
</span><span>&lt;/</span><span style="color:#ffb964;">row</span><span>&gt;
</span></code></pre>
<ul>
<li>Column names are the name attributes of <field> tags, and values are the contents of these tags:</li>
</ul>
<pre data-lang="xml" style="background-color:#151515;color:#e8e8d3;" class="language-xml "><code class="language-xml" data-lang="xml"><span>&lt;</span><span style="color:#ffb964;">row</span><span>&gt;
</span><span>  &lt;</span><span style="color:#ffb964;">field name</span><span>=</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">column1</span><span style="color:#556633;">&#39;</span><span>&gt;value1&lt;/</span><span style="color:#ffb964;">field</span><span>&gt;
</span><span>  &lt;</span><span style="color:#ffb964;">field name</span><span>=</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">column2</span><span style="color:#556633;">&#39;</span><span>&gt;value2&lt;/</span><span style="color:#ffb964;">field</span><span>&gt;
</span><span>&lt;/</span><span style="color:#ffb964;">row</span><span>&gt;
</span></code></pre>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/pull/8404">PR | support copy from xml</a></li>
</ul>
<h4 id="support-for-char-collation">Support for Char Collation</h4>
<p>After <a href="https://github.com/datafuselabs/databend/pull/8610">#8610</a> was merged, Databend now supports setting <code>collation</code> to select the string encoding to be considered.</p>
<p>By default, <code>collation</code> is set to <code>'binary'</code>, as Databend stores string columns in binary format by default, which you can change to <code>'utf-8'</code> with a statement like the following:</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>set collation = </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">utf8</span><span style="color:#556633;">&#39;</span><span>;
</span></code></pre>
<p>This may help you to get the expected results when working with non-English strings.</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>statement query TI
</span><span>select substr(</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">城区主城区其他</span><span style="color:#556633;">&#39;</span><span>, </span><span style="color:#cf6a4c;">1</span><span>, </span><span style="color:#cf6a4c;">6</span><span>), length(</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">我爱中国</span><span style="color:#556633;">&#39;</span><span>);
</span><span>
</span><span style="color:#888888;">----
</span><span>城区	</span><span style="color:#cf6a4c;">12
</span><span>
</span><span>
</span><span>statement ok
</span><span>set collation = </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">utf8</span><span style="color:#556633;">&#39;</span><span>;
</span><span>
</span><span>
</span><span>statement query TI
</span><span>select substr(</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">城区主城区其他</span><span style="color:#556633;">&#39;</span><span>, </span><span style="color:#cf6a4c;">1</span><span>, </span><span style="color:#cf6a4c;">6</span><span>), length(</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">我爱中国</span><span style="color:#556633;">&#39;</span><span>);
</span><span>
</span><span style="color:#888888;">----
</span><span>城区主城区其	</span><span style="color:#cf6a4c;">4
</span></code></pre>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/pull/8610">PR | add collation</a></li>
</ul>
<h2 id="issues">Issues</h2>
<p>Meet issues you may be interested in and try to solve it.</p>
<h4 id="enable-xor-filter-index-for-in">Enable Xor Filter Index for IN</h4>
<p>Databend introduced the <a href="https://arxiv.org/pdf/2201.01174.pdf">Xor Fliter</a> to replace the Bloom Filter (<a href="https://github.com/datafuselabs/databend/pull/7870">#7870</a>), which in some scenarios gives about twice the performance improvement and requires very little data to be scanned. </p>
<p>Initially, we simply added this index for the string columns.Then, in <a href="https://github.com/datafuselabs/databend/pull/7958">#7958</a>, it is enabled for the integer columns.</p>
<p>Now, we want to enable Xor Filter index for <code>IN</code> .</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>SELECT * FROM t1 where xx IN (&#39;&#39;, &#39;&#39;)
</span></code></pre>
<p><a href="https://github.com/datafuselabs/databend/issues/8625">Issue 8625: performance: enable xor filter index for IN</a></p>
<p>If you find it interesting, try to solve it or participate in discussions and PR reviews. Or you can click on <a href="https://link.databend.rs/i-m-feeling-lucky">https://link.databend.rs/i-m-feeling-lucky</a> to pick up a good first issue, good luck!</p>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.105-nightly">v0.8.105-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.104-nightly">v0.8.104-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.103-nightly">v0.8.103-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.102-nightly">v0.8.102-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.101-nightly">v0.8.101-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.100-nightly">v0.8.100-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Chasen-Zhang"><img alt="Chasen-Zhang" src="https://avatars.githubusercontent.com/u/15354455?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ClSlaid"><img alt="ClSlaid" src="https://avatars.githubusercontent.com/u/44747719?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/Chasen-Zhang">Chasen-Zhang</a></td><td align="center"><a href="https://github.com/ClSlaid">ClSlaid</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/apps/dependabot"><img alt="dependabot[bot]" src="https://avatars.githubusercontent.com/in/29110?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/drmingdrmer"><img alt="drmingdrmer" src="https://avatars.githubusercontent.com/u/44069?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/eliasyaoyc"><img alt="eliasyaoyc" src="https://avatars.githubusercontent.com/u/46013886?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/RinChanNOWWW"><img alt="RinChanNOWWW" src="https://avatars.githubusercontent.com/u/33975039?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/apps/dependabot">dependabot[bot]</a></td><td align="center"><a href="https://github.com/drmingdrmer">drmingdrmer</a></td><td align="center"><a href="https://github.com/eliasyaoyc">eliasyaoyc</a></td><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/RinChanNOWWW">RinChanNOWWW</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/zhang2014"><img alt="zhang2014" src="https://avatars.githubusercontent.com/u/8087042?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ZhiHanZ"><img alt="ZhiHanZ" src="https://avatars.githubusercontent.com/u/25170437?v=4&s=117" width="117"></a></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/zhang2014">zhang2014</a></td><td align="center"><a href="https://github.com/ZhiHanZ">ZhiHanZ</a></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://weekly.databend.rs/">Weekly</a> (A weekly newsletter about Databend)</li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a> (Feature/Bug reports, Contributions)</li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a> (Get the news fast)</li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a> (For live discussion with the Community)</li>
</ul>

        </div>

                </div>
            
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-11-02-databend-weekly/">This week in Databend #66</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-11-02
        </span>

    </div>

    

                    
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is a powerful cloud data warehouse. Built for elasticity and efficiency. Free and open. Also available in the cloud: <a href="https://app.databend.com">https://app.databend.com</a> .</p>
<h2 id="what-s-changed">What's Changed</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="exciting-new-features-sparkles">Exciting New Features ✨</h3>
<p><strong>RFC</strong></p>
<ul>
<li>User Stage (<a href="https://github.com/datafuselabs/databend/pull/8519">#8519</a>)</li>
</ul>
<p><strong>user stage</strong></p>
<ul>
<li>add internal and legacy internal stage support (<a href="https://github.com/datafuselabs/databend/pull/8526">#8526</a>)</li>
<li>implement user stage support along with stateful tests (<a href="https://github.com/datafuselabs/databend/pull/8556">#8556</a>)</li>
</ul>
<p><strong>multiple catalog</strong></p>
<ul>
<li>implement multiple catalog AST (<a href="https://github.com/datafuselabs/databend/pull/8608">#8608</a>)</li>
</ul>
<p><strong>hive</strong></p>
<ul>
<li>hive predict pushdown (<a href="https://github.com/datafuselabs/databend/pull/8469">#8469</a>)</li>
<li>suport substr &amp;&amp; order by with null values compatible with hive functions (<a href="https://github.com/datafuselabs/databend/pull/8558">#8558</a>)</li>
</ul>
<p><strong>rbac</strong></p>
<ul>
<li>only display available roles in <code>SHOW ROLES</code> statement (<a href="https://github.com/datafuselabs/databend/pull/8553">#8553</a>)</li>
</ul>
<p><strong>compatibility</strong></p>
<ul>
<li>support mydumper dump data (<a href="https://github.com/datafuselabs/databend/pull/8500">#8500</a>)</li>
</ul>
<p><strong>auth</strong></p>
<ul>
<li>add common auth module and support file token on sharing endpoint (<a href="https://github.com/datafuselabs/databend/pull/8607">#8607</a>)</li>
</ul>
<p><strong>format</strong></p>
<ul>
<li>allow nested field in TSV (<a href="https://github.com/datafuselabs/databend/pull/8606">#8606</a>)</li>
<li>unify format settings/options (<a href="https://github.com/datafuselabs/databend/pull/8566">#8566</a>)</li>
</ul>
<p><strong>hashtable</strong></p>
<ul>
<li>adaptive string hash table (<a href="https://github.com/datafuselabs/databend/pull/7971">#7971</a>)</li>
</ul>
<p><strong>meta</strong></p>
<ul>
<li>auto-clean expired keys (<a href="https://github.com/datafuselabs/databend/pull/8539">#8539</a>)</li>
<li>export/import supports new key-space: Expire (<a href="https://github.com/datafuselabs/databend/pull/8578">#8578</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>implement logging format for databend-query (<a href="https://github.com/datafuselabs/databend/pull/8466">#8466</a>)</li>
</ul>
<h3 id="code-refactor-tada">Code Refactor 🎉</h3>
<p><strong>error handler</strong></p>
<ul>
<li>add internal error and merge other not needed errors (<a href="https://github.com/datafuselabs/databend/pull/8581">#8581</a>)</li>
</ul>
<p><strong>interpreter</strong></p>
<ul>
<li>move <code>interpreter_common.rs</code> to common (<a href="https://github.com/datafuselabs/databend/pull/8593">#8593</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>remove legacy crate codes (<a href="https://github.com/datafuselabs/databend/pull/8412">#8412</a>)</li>
<li>avoid extra memcpy (<a href="https://github.com/datafuselabs/databend/pull/8569">#8569</a>)</li>
<li>migrate serializations to expression (<a href="https://github.com/datafuselabs/databend/pull/8582">#8582</a>)</li>
</ul>
<p><strong>storage</strong></p>
<ul>
<li>make block meta easier to be cloned (<a href="https://github.com/datafuselabs/databend/pull/8548">#8548</a>)</li>
</ul>
<p><strong>new expression</strong></p>
<ul>
<li>cast timestamp to variant string instead of variant int (<a href="https://github.com/datafuselabs/databend/pull/8580">#8580</a>)</li>
</ul>
<h3 id="thoughtful-bug-fix-wrench">Thoughtful Bug Fix 🔧</h3>
<p><strong>compatibility</strong></p>
<ul>
<li>fed mysqldump 5.7.16 <code>/*!code</code> query (<a href="https://github.com/datafuselabs/databend/pull/8485">#8485</a>)</li>
</ul>
<p><strong>planner</strong></p>
<ul>
<li>select view column not exists (<a href="https://github.com/datafuselabs/databend/pull/8543">#8543</a>)</li>
</ul>
<p><strong>query</strong></p>
<ul>
<li>div nullable(Int) with null value should not err (<a href="https://github.com/datafuselabs/databend/pull/8495">#8495</a>)</li>
<li><code>CURRENT ROLE</code> behavior with <code>AUTH ROLE</code> is set (<a href="https://github.com/datafuselabs/databend/pull/8546">#8546</a>)</li>
</ul>
<p><strong>storage</strong></p>
<ul>
<li>compact limit (<a href="https://github.com/datafuselabs/databend/pull/8473">#8473</a>)</li>
<li>incorrect index size during reducing block metas (<a href="https://github.com/datafuselabs/databend/pull/8428">#8428</a>)</li>
</ul>
<h2 id="news">News</h2>
<p>Let's take a look at what's new at Datafuse Labs &amp; Databend each week.</p>
<h4 id="string-adaptive-hash-table">String Adaptive Hash Table</h4>
<p><em>String Adaptive Hash Table</em> is one of the Databend community's projects in the Open Source Promotion Plan 2022. <a href="https://github.com/usamoi">@usamoi</a> helped us with this important work, which has now been merged into <a href="https://github.com/datafuselabs/databend">Databend</a> repository and has resulted in a 20% - 50% performance improvement in certain scenarios.</p>
<p><a href="https://www.mdpi.com/2076-3417/10/6/1915">String Adaptive Hash Table</a> is designed for the key to be a string type, and different data structures are applied to optimise the insertion and reading based on the different lengths of the key.</p>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/pull/7971">PR | adaptive string hash table</a></li>
<li><a href="https://www.mdpi.com/2076-3417/10/6/1915">Paper | SAHA: A String Adaptive Hash Table for Analytical Databases </a></li>
<li><a href="https://github.com/usamoi/saha">GitHub - usamoi/saha</a></li>
</ul>
<h4 id="rfc-user-stage">RFC: User Stage</h4>
<p>Databend only supports named internal stage:</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>CREATE STAGE @my_stage;
</span><span>COPY INTO my_table FROM @my_stage;
</span></code></pre>
<p>However, named internal stages are complex to be used in some cases. Especially for users who only use stages to load data. By supporting the user stage, they can copy data more efficiently:</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>COPY INTO my_table from @~;
</span></code></pre>
<p><strong>Learn More</strong></p>
<ul>
<li><a href="https://databend.rs/doc/contributing/rfcs/user-stage">RFC: User Stage</a></li>
<li><a href="https://github.com/datafuselabs/databend/issues/8520">Tracking issues of RFC: User Stage</a></li>
</ul>
<h2 id="issues">Issues</h2>
<p>Meet issues you may be interested in and try to solve it.</p>
<h4 id="replace-rwlock-hashmap-and-mutex-hashmap-by-using-dashmap">Replace <code>RwLock&lt;HashMap&gt;</code> and <code>Mutex&lt;HashMap&gt;</code> by Using DashMap</h4>
<p><a href="https://github.com/xacrimon/dashmap">DashMap</a> is an implementation of a concurrent associative array/hashmap in Rust. it tries to be very simple to use and to be a direct replacement for <code>RwLock&lt;HashMap&lt;K, V&gt;&gt;</code>.</p>
<p>Using DashMap will bring two advantages:</p>
<ul>
<li>Code will be cleaner, and</li>
<li>Potential performance improvement</li>
</ul>
<p><a href="https://github.com/datafuselabs/databend/issues/8601">Issue 8601: Feature: replace RwLock<HashMap> and Mutex<HashMap> by using DashMap</a></p>
<p>If you find it interesting, try to solve it or participate in discussions and PR reviews. Or you can click on <a href="https://link.databend.rs/i-m-feeling-lucky">https://link.databend.rs/i-m-feeling-lucky</a> to pick up a good first issue, good luck!</p>
<h2 id="changlogs">Changlogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.99-nightly">v0.8.99-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.98-nightly">v0.8.98-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.97-nightly">v0.8.97-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.96-nightly">v0.8.96-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.95-nightly">v0.8.95-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.94-nightly">v0.8.94-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.93-nightly">v0.8.93-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.92-nightly">v0.8.92-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.8.91-nightly">v0.8.91-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Chasen-Zhang"><img alt="Chasen-Zhang" src="https://avatars.githubusercontent.com/u/15354455?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ClSlaid"><img alt="ClSlaid" src="https://avatars.githubusercontent.com/u/44747719?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/Chasen-Zhang">Chasen-Zhang</a></td><td align="center"><a href="https://github.com/ClSlaid">ClSlaid</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/drmingdrmer"><img alt="drmingdrmer" src="https://avatars.githubusercontent.com/u/44069?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/flaneur2020"><img alt="flaneur2020" src="https://avatars.githubusercontent.com/u/129800?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/leiysky"><img alt="leiysky" src="https://avatars.githubusercontent.com/u/22445410?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/drmingdrmer">drmingdrmer</a></td><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td><td align="center"><a href="https://github.com/flaneur2020">flaneur2020</a></td><td align="center"><a href="https://github.com/leiysky">leiysky</a></td><td align="center"><a href="https://github.com/lichuang">lichuang</a></td><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/sandflee"><img alt="sandflee" src="https://avatars.githubusercontent.com/u/5102100?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TszKitLo40"><img alt="TszKitLo40" src="https://avatars.githubusercontent.com/u/18443139?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/usamoi"><img alt="usamoi" src="https://avatars.githubusercontent.com/u/79277854?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/sandflee">sandflee</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td><td align="center"><a href="https://github.com/TCeason">TCeason</a></td><td align="center"><a href="https://github.com/TszKitLo40">TszKitLo40</a></td><td align="center"><a href="https://github.com/usamoi">usamoi</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/wubx"><img alt="wubx" src="https://avatars.githubusercontent.com/u/320680?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ZhiHanZ"><img alt="ZhiHanZ" src="https://avatars.githubusercontent.com/u/25170437?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/wubx">wubx</a></td><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/ZhiHanZ">ZhiHanZ</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://weekly.databend.rs/">Weekly</a> (A weekly newsletter about Databend)</li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a> (Feature/Bug reports, Contributions)</li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a> (Get the news fast)</li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a> (For live discussion with the Community)</li>
</ul>

        </div>

                </div>
            <div class="pagination">
                <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://weekly.databend.rs/page/2/">
                            <span class="button__icon">←</span>&nbsp;
                            <span class="button__text">Newer posts</span>
                        </a>
                    </span>
                
                    <span class="button next">
                        <a href="https://weekly.databend.rs/page/4/">
                            <span class="button__text">Older posts</span>&nbsp;
                            <span class="button__icon">→</span>
                        </a>
                    </span>
                </div>
            </div>
        </div>
        
    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>© 
    2023
 Datafuse Labs</span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
