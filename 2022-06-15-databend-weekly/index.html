<!DOCTYPE html>
<html lang="en">

<head>
    <title>Databend Weekly</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://weekly.databend.rs/style.css">
    <link rel="stylesheet" href="https://weekly.databend.rs/color/blue.css">

    <link rel="stylesheet" href="https://weekly.databend.rs/font-hack.css">

    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://weekly.databend.rs" style="text-decoration: none;">
                    <div class="logo">
                            Databend Weekly
                        </div>
                </a>
            </div>
        </div>

        <nav class="menu">
            <ul class="menu__inner">
                
                <li class="active"><a href="https://weekly.databend.rs">weekly</a></li>
            
                <li><a href="https://weekly.databend.rs/archive">archive</a></li>
            
                <li><a href="https://github.com/datafuselabs/databend" target="_blank" rel="noopener noreferrer">github</a></li>
            
                <li><a href="https://databend.rs/" target="_blank" rel="noopener noreferrer">docs</a></li>
            
                <li><a href="https://weekly.databend.rs/rss.xml">rss</a></li>
            </ul>
        </nav>
    
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://weekly.databend.rs/2022-06-15-databend-weekly/">This week in Databend #46</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2022-06-15
        </span>

    </div>

    

        
        <div class="post-content">
            <p><a href="https://github.com/datafuselabs/databend">Databend</a> is an open source <strong>elastic</strong> and <strong>reliable</strong> Modern Cloud Data Warehouse, it offers blazing fast query and combines elasticity, simplicity, low cost of the cloud, built to make the Data Cloud easy.</p>
<h2 id="big-changes">Big changes</h2>
<p>Below is a list of some major changes that we don't want you to miss.</p>
<h3 id="features">Features</h3>
<ul>
<li><code>WINDOW</code> function (<a href="https://github.com/datafuselabs/databend/pull/5401">#5401</a>)</li>
<li>new table engine: <code>RANDOM</code> (<a href="https://github.com/datafuselabs/databend/pull/5896">#5896</a>)</li>
<li>clickhouse http handler support TsvWithNamesAndTypes (<a href="https://github.com/datafuselabs/databend/pull/5898">#5898</a>)</li>
<li>add benchmark scripts of metasrv (<a href="https://github.com/datafuselabs/databend/pull/5865">#5865</a>)</li>
<li>support remove stage files (<a href="https://github.com/datafuselabs/databend/pull/5788">#5788</a>)</li>
<li>support struct data type (<a href="https://github.com/datafuselabs/databend/pull/5940">#5940</a>)</li>
</ul>
<p><strong>optimizer</strong></p>
<ul>
<li>support some common optimizer rules to refine optimizer framework (<a href="https://github.com/datafuselabs/databend/pull/5877">#5877</a>)</li>
<li>support predicate push down through join (<a href="https://github.com/datafuselabs/databend/pull/5914">#5914</a>)</li>
<li>support constant folding (<a href="https://github.com/datafuselabs/databend/pull/5924">#5924</a>)</li>
</ul>
<p><strong>new planner</strong></p>
<ul>
<li>support left outer join and right outer join (<a href="https://github.com/datafuselabs/databend/pull/5972">#5972</a>)</li>
<li>support semi and anti join in new planner (<a href="https://github.com/datafuselabs/databend/pull/5869">#5869</a>)</li>
<li>support set operators in parser and planner (<a href="https://github.com/datafuselabs/databend/pull/5833">#5833</a>)</li>
<li>support table statements in new planner (<a href="https://github.com/datafuselabs/databend/pull/5907">#5907</a>)</li>
<li>add <code>DDL STAGE</code> for new planner framework (<a href="https://github.com/datafuselabs/databend/pull/5821">#5821</a>)</li>
<li>support rename database in new planner (<a href="https://github.com/datafuselabs/databend/pull/5887">#5887</a>)</li>
<li>support <code>alter/drop view</code> in new planner (<a href="https://github.com/datafuselabs/databend/pull/5862">#5862</a> &amp; <a href="https://github.com/datafuselabs/databend/pull/5920">#5920</a>)</li>
<li>migrate CREATE/DROP ROLE statement to new planner (<a href="https://github.com/datafuselabs/databend/pull/5935">#5935</a>)</li>
</ul>
<h3 id="improvement">Improvement</h3>
<ul>
<li>row base serializer  (<a href="https://github.com/datafuselabs/databend/pull/5791">#5791</a>)</li>
<li>renaming for better readability (<a href="https://github.com/datafuselabs/databend/pull/5879">#5879</a>)</li>
<li>list/remove stage files from meta api (<a href="https://github.com/datafuselabs/databend/pull/5857">#5857</a>)</li>
<li>use unboxed_simple to simple GAT in async-trait (<a href="https://github.com/datafuselabs/databend/pull/5999">#5999</a>)</li>
<li>add meta grpc client network metrics (<a href="https://github.com/datafuselabs/databend/pull/5978">#5978</a>)</li>
<li>improve clickhouse http handler (<a href="https://github.com/datafuselabs/databend/pull/5933">#5933</a>)</li>
<li>use micromarshal to make references clearer (<a href="https://github.com/datafuselabs/databend/pull/5974">#5974</a>)</li>
</ul>
<h3 id="build-testing-ci">Build / Testing / CI</h3>
<ul>
<li>use fuse engine instead of memory engine in test (<a href="https://github.com/datafuselabs/databend/pull/5530">#5530</a>)</li>
</ul>
<h3 id="bug-fixes">Bug fixes</h3>
<ul>
<li>fix read quoted string (<a href="https://github.com/datafuselabs/databend/pull/5870">#5870</a>)</li>
<li>correctly handle catalog in statements (<a href="https://github.com/datafuselabs/databend/pull/5909">#5909</a>)</li>
<li>fix correlated subquery with joins (<a href="https://github.com/datafuselabs/databend/pull/5947">#5947</a>)</li>
<li>server panic when exceeds max active sessions (<a href="https://github.com/datafuselabs/databend/pull/5928">#5928</a>)</li>
<li>fix status cause mysql client hang (<a href="https://github.com/datafuselabs/databend/pull/5961">#5961</a>)</li>
<li><code>ProcessorExecutorStream</code> lost data (<a href="https://github.com/datafuselabs/databend/pull/5983">#5983</a>)</li>
<li>fix incorrect return datatype of function if (<a href="https://github.com/datafuselabs/databend/pull/5980">#5980</a>)</li>
</ul>
<h2 id="tips">Tips</h2>
<p>Let's learn a weekly tip from Databend.</p>
<h3 id="using-join-with-databend">Using Join with Databend</h3>
<p>As you can see, one of the major efforts of Databend in recent times has been the development and migration to the new Planner. We have implemented support for Join on the new Planner to better accommodate multi-table queries.</p>
<blockquote>
<p>To use JOIN, you must enable the new Databend planner first. To do so, perform the following command in the SQL client:</p>
<pre data-lang="SQL" style="background-color:#151515;color:#e8e8d3;" class="language-SQL "><code class="language-SQL" data-lang="SQL"><span>set enable_planner_v2=</span><span style="color:#cf6a4c;">1</span><span>;
</span></code></pre>
</blockquote>
<p>A join allows you to combine columns from two or more tables into a single result set. Databend supports the following join types:</p>
<ul>
<li>Inner Join</li>
<li>Natural Join</li>
<li>Cross Join</li>
<li>Left Join</li>
<li>Right Join</li>
</ul>
<p><strong>Let's see a <code>CROSS JOIN</code> example</strong></p>
<p>A <em>cross join</em> returns a result set that includes each row from the first table joined with each row from the second table.</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>SELECT select_list
</span><span>FROM table_a
</span><span>	CROSS JOIN table_b
</span></code></pre>
<p>Imagine we have the following tables:</p>
<p>Table &quot;vip_info&quot;: This table stores the VIP client information.</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>| Client_ID | Region    |
</span><span>| --------- | --------- |
</span><span>| 101       | Toronto   |
</span><span>| 102       | Quebec    |
</span><span>| 103       | Vancouver |
</span></code></pre>
<p>Table &quot;gift&quot;: This table lists the gift options for the VIP clients.</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>| Gift      |
</span><span>| --------- |
</span><span>| Croissant |
</span><span>| Donut     |
</span><span>| Coffee    |
</span><span>| Soda      |
</span></code></pre>
<p>The following command returns a result set that assigns each gift option to each VIP client:</p>
<pre data-lang="sql" style="background-color:#151515;color:#e8e8d3;" class="language-sql "><code class="language-sql" data-lang="sql"><span>select </span><span style="color:#ffb964;">* </span><span>from vip_info cross join gift;
</span></code></pre>
<p>Output:</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>| Client_ID | Region    | Gift      |
</span><span>| --------- | --------- | --------- |
</span><span>| 101       | Toronto   | Croissant |
</span><span>| 101       | Toronto   | Donut     |
</span><span>| 101       | Toronto   | Coffee    |
</span><span>| 101       | Toronto   | Soda      |
</span><span>| 102       | Quebec    | Croissant |
</span><span>| 102       | Quebec    | Donut     |
</span><span>| 102       | Quebec    | Coffee    |
</span><span>| 102       | Quebec    | Soda      |
</span><span>| 103       | Vancouver | Croissant |
</span><span>| 103       | Vancouver | Donut     |
</span><span>| 103       | Vancouver | Coffee    |
</span><span>| 103       | Vancouver | Soda      |
</span></code></pre>
<p><strong>Learn more:</strong></p>
<ul>
<li><a href="https://databend.rs/doc/reference/sql/query-syntax/dml-join">DOC | JOIN</a></li>
</ul>
<h2 id="changelogs">Changelogs</h2>
<p>You can check the changelogs of Databend nightly to learn about our latest developments.</p>
<ul>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.87-nightly">v0.7.87-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.86-nightly">v0.7.86-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.85-nightly">v0.7.85-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.84-nightly">v0.7.84-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.83-nightly">v0.7.83-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.82-nightly">v0.7.82-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.81-nightly">v0.7.81-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.80-nightly">v0.7.80-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.79-nightly">v0.7.79-nightly</a></li>
<li><a href="https://github.com/datafuselabs/databend/releases/tag/v0.7.78-nightly">v0.7.78-nightly</a></li>
</ul>
<h2 id="contributors">Contributors</h2>
<p>Thanks a lot to the contributors for their excellent work this week.</p>
<table><thead><tr><th align="center"><a href="https://github.com/andylokandy"><img alt="andylokandy" src="https://avatars.githubusercontent.com/u/9637710?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/b41sh"><img alt="b41sh" src="https://avatars.githubusercontent.com/u/1070352?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/BohuTANG"><img alt="BohuTANG" src="https://avatars.githubusercontent.com/u/172204?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/dantengsky"><img alt="dantengsky" src="https://avatars.githubusercontent.com/u/22081156?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/doki23"><img alt="doki23" src="https://avatars.githubusercontent.com/u/11144133?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/everpcpc"><img alt="everpcpc" src="https://avatars.githubusercontent.com/u/1808802?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/andylokandy">andylokandy</a></td><td align="center"><a href="https://github.com/b41sh">b41sh</a></td><td align="center"><a href="https://github.com/BohuTANG">BohuTANG</a></td><td align="center"><a href="https://github.com/dantengsky">dantengsky</a></td><td align="center"><a href="https://github.com/doki23">doki23</a></td><td align="center"><a href="https://github.com/everpcpc">everpcpc</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/fkuner"><img alt="fkuner" src="https://avatars.githubusercontent.com/u/39162698?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/hantmac"><img alt="hantmac" src="https://avatars.githubusercontent.com/u/7600925?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/junnplus"><img alt="junnplus" src="https://avatars.githubusercontent.com/u/8097526?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/Kikkon"><img alt="Kikkon" src="https://avatars.githubusercontent.com/u/19528375?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/leiysky"><img alt="leiysky" src="https://avatars.githubusercontent.com/u/22445410?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/lichuang"><img alt="lichuang" src="https://avatars.githubusercontent.com/u/1998569?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/fkuner">fkuner</a></td><td align="center"><a href="https://github.com/hantmac">hantmac</a></td><td align="center"><a href="https://github.com/junnplus">junnplus</a></td><td align="center"><a href="https://github.com/Kikkon">Kikkon</a></td><td align="center"><a href="https://github.com/leiysky">leiysky</a></td><td align="center"><a href="https://github.com/lichuang">lichuang</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/apps/mergify"><img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/PsiACE"><img alt="PsiACE" src="https://avatars.githubusercontent.com/u/36896360?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/RinChanNOWWW"><img alt="RinChanNOWWW" src="https://avatars.githubusercontent.com/u/33975039?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/soyeric128"><img alt="soyeric128" src="https://avatars.githubusercontent.com/u/106025534?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/sundy-li"><img alt="sundy-li" src="https://avatars.githubusercontent.com/u/3325189?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/TCeason"><img alt="TCeason" src="https://avatars.githubusercontent.com/u/33082201?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/apps/mergify">mergify[bot]</a></td><td align="center"><a href="https://github.com/PsiACE">PsiACE</a></td><td align="center"><a href="https://github.com/RinChanNOWWW">RinChanNOWWW</a></td><td align="center"><a href="https://github.com/soyeric128">soyeric128</a></td><td align="center"><a href="https://github.com/sundy-li">sundy-li</a></td><td align="center"><a href="https://github.com/TCeason">TCeason</a></td></tr>
</tbody></table>
<table><thead><tr><th align="center"><a href="https://github.com/Xuanwo"><img alt="Xuanwo" src="https://avatars.githubusercontent.com/u/5351546?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/xudong963"><img alt="xudong963" src="https://avatars.githubusercontent.com/u/41979257?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ygf11"><img alt="ygf11" src="https://avatars.githubusercontent.com/u/3428089?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/youngsofun"><img alt="youngsofun" src="https://avatars.githubusercontent.com/u/5782159?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/ZeaLoVe"><img alt="ZeaLoVe" src="https://avatars.githubusercontent.com/u/10904090?v=4&s=117" width="117"></a></th><th align="center"><a href="https://github.com/zhyass"><img alt="zhyass" src="https://avatars.githubusercontent.com/u/34016424?v=4&s=117" width="117"></a></th></tr></thead><tbody>
<tr><td align="center"><a href="https://github.com/Xuanwo">Xuanwo</a></td><td align="center"><a href="https://github.com/xudong963">xudong963</a></td><td align="center"><a href="https://github.com/ygf11">ygf11</a></td><td align="center"><a href="https://github.com/youngsofun">youngsofun</a></td><td align="center"><a href="https://github.com/ZeaLoVe">ZeaLoVe</a></td><td align="center"><a href="https://github.com/zhyass">zhyass</a></td></tr>
</tbody></table>
<h2 id="meet-us">Meet Us</h2>
<p>Please join the <a href="https://github.com/datafuselabs/">DatafuseLabs Community</a> if you are interested in Databend.</p>
<p>We are looking forward to seeing you try our code. We have a strong team behind you to ensure a smooth experience in trying our code for your projects.
If you are a hacker passionate about database internals, feel free to play with our code.</p>
<p>You can submit <a href="https://github.com/datafuselabs/databend/issues">issues</a> for any problems you find. We also highly appreciate any of your pull requests.</p>
<ul>
<li><a href="https://databend.rs">Databend Website</a></li>
<li><a href="https://twitter.com/Datafuse_Labs">Twitter</a></li>
<li><a href="https://github.com/datafuselabs/databend/discussions">GitHub Discussions</a></li>
<li><a href="https://link.databend.rs/join-slack">Slack Channel</a></li>
</ul>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Thanks for reading! Read other posts?</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://weekly.databend.rs/2022-06-22-databend-weekly/">
                            <span class="button__icon">←</span>&nbsp;
                            <span class="button__text">This week in Databend #47</span>
                        </a>
                    </span>
                
                
                    <span class="button next">
                        <a href="https://weekly.databend.rs/2022-06-08-databend-weekly/">
                            <span class="button__text">This week in Databend #45</span>&nbsp;
                            <span class="button__icon">→</span>
                        </a>
                    </span>
                </div>
        </div>
    
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>© 
    2023
 Datafuse Labs</span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
